#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[6] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 0.514608028775; theta[1] = 0.508644058916; theta[2] = 0.517024683946; theta[3] = 0.51172673221; theta[4] = 0.511203835115; theta[5] = 0.503114894291; theta[6] = 0.499526401093; theta[7] = 0.490341760277; theta[8] = 0.495812522942; theta[9] = 0.483340471295; theta[10] = 0.498104955342; theta[11] = 0.499734512994; theta[12] = 0.504658929575; theta[13] = 0.49693165483; theta[14] = 0.502901740313; theta[15] = 0.504071860936; theta[16] = 0.508589116919; theta[17] = 0.500379659896; theta[18] = 0.503954972808; theta[19] = 0.509808929864; theta[20] = 0.515351731602; theta[21] = 0.510956348228; theta[22] = 0.516363480214; theta[23] = 0.512645754874; theta[24] = 0.510657888204; theta[25] = 0.50726948969; theta[26] = 0.513394199546; theta[27] = 0.499174713239; theta[28] = 0.488002822978; theta[29] = 0.517592079966; theta[30] = 0.514310074477; theta[31] = 0.509045789839;
                        sigma[0] = 0.002264223687; sigma[1] = 0.002253927278; sigma[2] = 0.002245381428; sigma[3] = 0.002229509316; sigma[4] = 0.002252906789; sigma[5] = 0.002255735337; sigma[6] = 0.002385459002; sigma[7] = 0.002366430822; sigma[8] = 0.00237030975; sigma[9] = 0.002300508535; sigma[10] = 0.002327502551; sigma[11] = 0.00237092806; sigma[12] = 0.002312009975; sigma[13] = 0.002128360759; sigma[14] = 0.002233960345; sigma[15] = 0.002148282818; sigma[16] = 0.002154494783; sigma[17] = 0.002146181714; sigma[18] = 0.002135547973; sigma[19] = 0.002089241658; sigma[20] = 0.002068341598; sigma[21] = 0.00203797212; sigma[22] = 0.001957465926; sigma[23] = 0.00193503756; sigma[24] = 0.001999781645; sigma[25] = 0.001969891403; sigma[26] = 0.001964974895; sigma[27] = 0.001933134606; sigma[28] = 0.001967251809; sigma[29] = 0.001910460347; sigma[30] = 0.001988168112; sigma[31] = 0.001870828766;
                        votes[0] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = -0.680152589506; theta[1] = -0.686795201344; theta[2] = -0.678614797062; theta[3] = -0.682039857152; theta[4] = -0.683311342512; theta[5] = -0.692199382374; theta[6] = -0.701665104158; theta[7] = -0.706545712256; theta[8] = -0.706393047436; theta[9] = -0.713758855945; theta[10] = -0.704886564172; theta[11] = -0.697011153146; theta[12] = -0.694850117676; theta[13] = -0.697814438022; theta[14] = -0.694785575358; theta[15] = -0.691716000234; theta[16] = -0.693706839259; theta[17] = -0.702753249685; theta[18] = -0.699531982273; theta[19] = -0.68802685482; theta[20] = -0.682188534505; theta[21] = -0.679460613239; theta[22] = -0.671972721171; theta[23] = -0.67644642545; theta[24] = -0.685808969921; theta[25] = -0.68459301352; theta[26] = -0.674376528351; theta[27] = -0.692376981586; theta[28] = -0.709588624421; theta[29] = -0.688800347818; theta[30] = -0.69748516911; theta[31] = -0.702680289854;
                        sigma[0] = 0.033266818581; sigma[1] = 0.032575068778; sigma[2] = 0.032204058749; sigma[3] = 0.032583916304; sigma[4] = 0.031921209685; sigma[5] = 0.031674493786; sigma[6] = 0.032081654941; sigma[7] = 0.033089354284; sigma[8] = 0.033212695525; sigma[9] = 0.033943866022; sigma[10] = 0.033492807433; sigma[11] = 0.032978007421; sigma[12] = 0.032835166943; sigma[13] = 0.033255604554; sigma[14] = 0.034650288497; sigma[15] = 0.03526411987; sigma[16] = 0.035775077345; sigma[17] = 0.036411716647; sigma[18] = 0.037115063598; sigma[19] = 0.040323392208; sigma[20] = 0.04196969458; sigma[21] = 0.04537263398; sigma[22] = 0.046988368441; sigma[23] = 0.04698886931; sigma[24] = 0.050842070272; sigma[25] = 0.053831529195; sigma[26] = 0.052312390148; sigma[27] = 0.049313272811; sigma[28] = 0.043254309421; sigma[29] = 0.036276500008; sigma[30] = 0.038846746917; sigma[31] = 0.045559698196;
                        votes[1] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = -0.036839749329; theta[1] = -0.04181462682; theta[2] = -0.034956938133; theta[3] = -0.037960016378; theta[4] = -0.038875917912; theta[5] = -0.047535671866; theta[6] = -0.052616751148; theta[7] = -0.059193705815; theta[8] = -0.056931429398; theta[9] = -0.065264228381; theta[10] = -0.054033909235; theta[11] = -0.050082504462; theta[12] = -0.046580640756; theta[13] = -0.052223203092; theta[14] = -0.048198826655; theta[15] = -0.046236576174; theta[16] = -0.042942476783; theta[17] = -0.050876810857; theta[18] = -0.048313750291; theta[19] = -0.041424673661; theta[20] = -0.036061640565; theta[21] = -0.040637644983; theta[22] = -0.035294290722; theta[23] = -0.039996027395; theta[24] = -0.045164183742; theta[25] = -0.045888828107; theta[26] = -0.039432682563; theta[27] = -0.052928941761; theta[28] = -0.066935073105; theta[29] = -0.037559452107; theta[30] = -0.041785066542; theta[31] = -0.04143695587;
                        sigma[0] = 0.00044390093; sigma[1] = 0.00046514861; sigma[2] = 0.000446171284; sigma[3] = 0.000444267872; sigma[4] = 0.00045264276; sigma[5] = 0.000491913832; sigma[6] = 0.000538293878; sigma[7] = 0.000480232082; sigma[8] = 0.000469697183; sigma[9] = 0.0004974171; sigma[10] = 0.00049277729; sigma[11] = 0.000447006829; sigma[12] = 0.00046583351; sigma[13] = 0.000419235872; sigma[14] = 0.000426407979; sigma[15] = 0.000407643366; sigma[16] = 0.000436824163; sigma[17] = 0.000374483994; sigma[18] = 0.000447319638; sigma[19] = 0.00035385226; sigma[20] = 0.000411232778; sigma[21] = 0.000416813177; sigma[22] = 0.000425081251; sigma[23] = 0.000361623342; sigma[24] = 0.000444511825; sigma[25] = 0.000408845658; sigma[26] = 0.000376014202; sigma[27] = 0.000361566746; sigma[28] = 0.000406267431; sigma[29] = 0.000365438419; sigma[30] = 0.000407188563; sigma[31] = 0.000358620386;
                        votes[2] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = -0.515471751927; theta[1] = -0.519699115494; theta[2] = -0.512197905595; theta[3] = -0.514058293377; theta[4] = -0.51576322142; theta[5] = -0.523180299311; theta[6] = -0.528388524304; theta[7] = -0.534253858724; theta[8] = -0.531174985261; theta[9] = -0.537877923469; theta[10] = -0.526172678509; theta[11] = -0.521445142451; theta[12] = -0.518406559376; theta[13] = -0.523180903989; theta[14] = -0.517569345571; theta[15] = -0.513538995037; theta[16] = -0.511505121515; theta[17] = -0.517270789082; theta[18] = -0.516616620523; theta[19] = -0.512424331612; theta[20] = -0.507257368857; theta[21] = -0.511432455422; theta[22] = -0.505327816708; theta[23] = -0.50702499563; theta[24] = -0.512978612307; theta[25] = -0.512928401575; theta[26] = -0.50459654722; theta[27] = -0.521241997785; theta[28] = -0.5374910784; theta[29] = -0.509106283854; theta[30] = -0.513477885663; theta[31] = -0.513123939903;
                        sigma[0] = 0.010291534262; sigma[1] = 0.011965036214; sigma[2] = 0.00996488784; sigma[3] = 0.0105747961; sigma[4] = 0.00991334058; sigma[5] = 0.009792681628; sigma[6] = 0.009789810545; sigma[7] = 0.009737443375; sigma[8] = 0.009673961746; sigma[9] = 0.009883641622; sigma[10] = 0.01030569839; sigma[11] = 0.010613091755; sigma[12] = 0.011154058871; sigma[13] = 0.011373111983; sigma[14] = 0.012016847634; sigma[15] = 0.012202376396; sigma[16] = 0.013014714821; sigma[17] = 0.013005229684; sigma[18] = 0.01267936626; sigma[19] = 0.012304023033; sigma[20] = 0.011583488612; sigma[21] = 0.01143778876; sigma[22] = 0.011216228701; sigma[23] = 0.011213079991; sigma[24] = 0.012566536411; sigma[25] = 0.013061685719; sigma[26] = 0.01167370473; sigma[27] = 0.01093890442; sigma[28] = 0.010416341777; sigma[29] = 0.010093152246; sigma[30] = 0.009794730482; sigma[31] = 0.009787089421;
                        votes[3] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 0.332404591946; theta[1] = 0.324028527744; theta[2] = 0.334215057477; theta[3] = 0.328497183662; theta[4] = 0.328967693292; theta[5] = 0.320122020746; theta[6] = 0.319251187771; theta[7] = 0.310087812965; theta[8] = 0.315484440475; theta[9] = 0.307057653133; theta[10] = 0.322143852164; theta[11] = 0.321771755603; theta[12] = 0.328825270687; theta[13] = 0.319795660257; theta[14] = 0.324692600809; theta[15] = 0.324337779031; theta[16] = 0.332169922432; theta[17] = 0.320271103875; theta[18] = 0.324452173941; theta[19] = 0.332864381568; theta[20] = 0.336530191622; theta[21] = 0.327503398494; theta[22] = 0.33374681519; theta[23] = 0.327575360315; theta[24] = 0.324519365529; theta[25] = 0.324122702791; theta[26] = 0.33306702708; theta[27] = 0.316502080695; theta[28] = 0.307406005854; theta[29] = 0.339192600097; theta[30] = 0.336323757659; theta[31] = 0.332798782703;
                        sigma[0] = 0.009825091313; sigma[1] = 0.008947092615; sigma[2] = 0.0090360734; sigma[3] = 0.008971206097; sigma[4] = 0.008338699997; sigma[5] = 0.008433790286; sigma[6] = 0.009040040108; sigma[7] = 0.007928327916; sigma[8] = 0.007234068921; sigma[9] = 0.008422252613; sigma[10] = 0.007856262144; sigma[11] = 0.006382668888; sigma[12] = 0.00760681288; sigma[13] = 0.007671764252; sigma[14] = 0.007935514064; sigma[15] = 0.008494252331; sigma[16] = 0.00994472638; sigma[17] = 0.007603206817; sigma[18] = 0.007289272262; sigma[19] = 0.00934892478; sigma[20] = 0.009647251609; sigma[21] = 0.009432634732; sigma[22] = 0.013551322373; sigma[23] = 0.013055601243; sigma[24] = 0.011025120726; sigma[25] = 0.011345893834; sigma[26] = 0.010408744617; sigma[27] = 0.008293904124; sigma[28] = 0.008260046667; sigma[29] = 0.008534612518; sigma[30] = 0.007987660676; sigma[31] = 0.007267124609;
                        votes[4] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 0.831482162239; theta[1] = 0.828348731351; theta[2] = 0.834645359345; theta[3] = 0.829651542386; theta[4] = 0.830665395265; theta[5] = 0.822095256948; theta[6] = 0.820347274085; theta[7] = 0.809729584791; theta[8] = 0.816978100821; theta[9] = 0.804700387346; theta[10] = 0.821069535535; theta[11] = 0.822207477343; theta[12] = 0.828347340137; theta[13] = 0.821976546812; theta[14] = 0.828230591503; theta[15] = 0.828522749415; theta[16] = 0.836699837916; theta[17] = 0.826866104702; theta[18] = 0.831770645826; theta[19] = 0.837447439803; theta[20] = 0.843253756048; theta[21] = 0.839260996415; theta[22] = 0.843798805915; theta[23] = 0.839783254676; theta[24] = 0.840856532833; theta[25] = 0.835097071662; theta[26] = 0.840832520599; theta[27] = 0.82589357074; theta[28] = 0.816410794378; theta[29] = 0.845910907597; theta[30] = 0.841657534443; theta[31] = 0.837219099118;
                        sigma[0] = 0.003261832382; sigma[1] = 0.003261235976; sigma[2] = 0.003163271165; sigma[3] = 0.0031874764; sigma[4] = 0.003251227864; sigma[5] = 0.00323976835; sigma[6] = 0.003291563893; sigma[7] = 0.003191046609; sigma[8] = 0.003089821373; sigma[9] = 0.00310178258; sigma[10] = 0.003284872701; sigma[11] = 0.003013925659; sigma[12] = 0.003138188117; sigma[13] = 0.003141481733; sigma[14] = 0.003018791403; sigma[15] = 0.002980538774; sigma[16] = 0.003216373528; sigma[17] = 0.003031362617; sigma[18] = 0.003143658467; sigma[19] = 0.00317307894; sigma[20] = 0.003081263208; sigma[21] = 0.003119816963; sigma[22] = 0.003250311099; sigma[23] = 0.003048112009; sigma[24] = 0.003158906141; sigma[25] = 0.003093707392; sigma[26] = 0.003158282204; sigma[27] = 0.003044765026; sigma[28] = 0.003270832739; sigma[29] = 0.003340347691; sigma[30] = 0.003137354621; sigma[31] = 0.003081451064;
                        votes[5] = 0.166666666667 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 6; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }