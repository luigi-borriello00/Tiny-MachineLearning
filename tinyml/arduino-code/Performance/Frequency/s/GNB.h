#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[3] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 1143.535138888889; theta[1] = 1146.141527777777; theta[2] = 1145.244305555555; theta[3] = 1148.060277777778; theta[4] = 1149.394166666667; theta[5] = 1147.498888888889; theta[6] = 1150.635833333334; theta[7] = 1148.780138888889; theta[8] = 1147.30013888889; theta[9] = 1147.2875; theta[10] = 1151.582916666666; theta[11] = 1147.9925; theta[12] = 1151.59375; theta[13] = 1151.236111111111; theta[14] = 1151.495; theta[15] = 1141.174861111111; theta[16] = 1146.285833333333; theta[17] = 1147.708194444444; theta[18] = 1147.672777777778; theta[19] = 1143.321805555556; theta[20] = 1139.713611111111; theta[21] = 1148.228611111112; theta[22] = 1144.076805555556; theta[23] = 1147.478888888889; theta[24] = 1145.35; theta[25] = 1150.164444444444; theta[26] = 1153.524722222222; theta[27] = 1147.505138888889; theta[28] = 1149.759722222222; theta[29] = 1144.878472222222; theta[30] = 1147.740972222222; theta[31] = 1142.614861111111;
                        sigma[0] = 5214.878674329842; sigma[1] = 4786.423687292808; sigma[2] = 5132.1639710891; sigma[3] = 5432.802979827531; sigma[4] = 5553.846356988022; sigma[5] = 4844.000792559012; sigma[6] = 4512.08121532135; sigma[7] = 4528.879389607621; sigma[8] = 4971.522689607621; sigma[9] = 5647.170531988025; sigma[10] = 5229.653953342187; sigma[11] = 4927.063276432463; sigma[12] = 4569.650622786632; sigma[13] = 4761.859334225674; sigma[14] = 6279.270682682464; sigma[15] = 4162.907396552064; sigma[16] = 4359.422251432468; sigma[17] = 4086.293069700214; sigma[18] = 4390.316749966414; sigma[19] = 4401.91403636688; sigma[20] = 4533.301091864564; sigma[21] = 4655.841414086787; sigma[22] = 4424.407193311324; sigma[23] = 5808.746437003456; sigma[24] = 5617.526154904687; sigma[25] = 4895.1586851516; sigma[26] = 5635.542113160858; sigma[27] = 4491.13671599651; sigma[28] = 5157.550104827527; sigma[29] = 4881.040578959473; sigma[30] = 4399.435888681698; sigma[31] = 4246.515424329843;
                        votes[0] = 0.4 - gauss(x, theta, sigma);
                        theta[0] = 1791.542499999999; theta[1] = 1794.634722222222; theta[2] = 1799.6675; theta[3] = 1797.463472222223; theta[4] = 1798.782083333332; theta[5] = 1796.791666666667; theta[6] = 1797.835138888889; theta[7] = 1795.70625; theta[8] = 1797.220833333333; theta[9] = 1796.205694444444; theta[10] = 1799.174722222222; theta[11] = 1796.520833333333; theta[12] = 1795.352777777778; theta[13] = 1793.934861111111; theta[14] = 1799.200833333333; theta[15] = 1798.74625; theta[16] = 1798.739861111111; theta[17] = 1798.839027777778; theta[18] = 1797.896388888888; theta[19] = 1800.43625; theta[20] = 1798.028472222223; theta[21] = 1798.1925; theta[22] = 1796.209722222222; theta[23] = 1801.105416666666; theta[24] = 1802.144722222223; theta[25] = 1800.847916666667; theta[26] = 1799.605833333334; theta[27] = 1797.74625; theta[28] = 1797.567083333333; theta[29] = 1797.504583333334; theta[30] = 1801.75361111111; theta[31] = 1800.823194444444;
                        sigma[0] = 5517.762123654688; sigma[1] = 5710.16170204975; sigma[2] = 5514.0621097658; sigma[3] = 6253.592955348358; sigma[4] = 6300.973013064409; sigma[5] = 5259.121357682461; sigma[6] = 6269.956390996506; sigma[7] = 5446.918778342188; sigma[8] = 5866.512040321355; sigma[9] = 5390.584279422435; sigma[10] = 5967.976685383083; sigma[11] = 5103.987965321357; sigma[12] = 5151.134805521971; sigma[13] = 5407.62807710762; sigma[14] = 5504.079123654687; sigma[15] = 5684.311506119969; sigma[16] = 5976.066367385401; sigma[17] = 4736.775616459471; sigma[18] = 5400.632947420117; sigma[19] = 5889.210986675525; sigma[20] = 5039.025253959472; sigma[21] = 5528.311198654686; sigma[22] = 4882.186060383086; sigma[23] = 5513.630588064407; sigma[24] = 5131.437707605306; sigma[25] = 4937.598407508853; sigma[26] = 4494.335865321354; sigma[27] = 4787.885295008856; sigma[28] = 4451.981953342187; sigma[29] = 4859.437913064411; sigma[30] = 5032.932169642342; sigma[31] = 4386.079001644659;
                        votes[1] = 0.4 - gauss(x, theta, sigma);
                        theta[0] = 2377.280833333333; theta[1] = 2380.353055555556; theta[2] = 2378.995; theta[3] = 2375.865; theta[4] = 2375.820833333333; theta[5] = 2377.555; theta[6] = 2376.810277777778; theta[7] = 2377.881944444445; theta[8] = 2376.596111111112; theta[9] = 2377.085555555554; theta[10] = 2377.789722222222; theta[11] = 2376.709166666667; theta[12] = 2377.475555555556; theta[13] = 2377.420833333334; theta[14] = 2377.325833333332; theta[15] = 2375.162777777778; theta[16] = 2376.105833333333; theta[17] = 2376.640277777778; theta[18] = 2381.245277777778; theta[19] = 2377.762777777778; theta[20] = 2378.073333333334; theta[21] = 2379.325555555555; theta[22] = 2383.198055555556; theta[23] = 2379.674722222222; theta[24] = 2380.895; theta[25] = 2379.466111111111; theta[26] = 2378.939722222222; theta[27] = 2379.069166666666; theta[28] = 2378.655833333333; theta[29] = 2379.617777777777; theta[30] = 2381.930277777778; theta[31] = 2380.663611111111;
                        sigma[0] = 2869.116531988024; sigma[1] = 3116.514895568268; sigma[2] = 2883.95854379358; sigma[3] = 2908.890154904692; sigma[4] = 2518.382715321356; sigma[5] = 2734.495816015798; sigma[6] = 2776.353371494192; sigma[7] = 2868.140317790491; sigma[8] = 2856.602748114564; sigma[9] = 2847.414754596052; sigma[10] = 2925.367449271974; sigma[11] = 2744.194220876911; sigma[12] = 2142.230254596046; sigma[13] = 2364.952409765802; sigma[14] = 2431.476309765799; sigma[15] = 2617.50421107753; sigma[16] = 2462.978320876912; sigma[17] = 2765.779238160859; sigma[18] = 2916.35626593864; sigma[19] = 2596.693516633084; sigma[20] = 2586.234996571358; sigma[21] = 2839.32460459605; sigma[22] = 2684.626623346047; sigma[23] = 2738.45543816086; sigma[24] = 2667.926399349127; sigma[25] = 2873.307870336788; sigma[26] = 2853.711871494195; sigma[27] = 2518.614470876912; sigma[28] = 2921.831765321352; sigma[29] = 2962.712536077523; sigma[30] = 2678.433127049749; sigma[31] = 3365.80045853123;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 3; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }