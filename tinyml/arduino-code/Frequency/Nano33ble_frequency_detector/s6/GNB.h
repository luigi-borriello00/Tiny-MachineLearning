#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[6] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 3414.319722222222; theta[1] = 3426.114444444444; theta[2] = 3417.025694444444; theta[3] = 3423.304861111112; theta[4] = 3423.989444444445; theta[5] = 3416.973194444444; theta[6] = 3417.686666666666; theta[7] = 3417.335833333334; theta[8] = 3408.538055555556; theta[9] = 3427.373333333332; theta[10] = 3410.73888888889; theta[11] = 3422.748055555555; theta[12] = 3409.621527777778; theta[13] = 3420.54986111111; theta[14] = 3423.132638888889; theta[15] = 3410.070694444444; theta[16] = 3420.466944444444; theta[17] = 3418.280416666666; theta[18] = 3421.509444444443; theta[19] = 3418.686805555554; theta[20] = 3419.296805555556; theta[21] = 3412.105138888888; theta[22] = 3422.426805555556; theta[23] = 3415.497638888888; theta[24] = 3430.070416666666; theta[25] = 3421.140555555556; theta[26] = 3421.284305555556; theta[27] = 3424.121944444445; theta[28] = 3423.980694444446; theta[29] = 3426.262083333333; theta[30] = 3417.413194444445; theta[31] = 3418.443888888888;
                        sigma[0] = 11174.001968108863; sigma[1] = 11271.52373732182; sigma[2] = 10852.583151037108; sigma[3] = 10319.441901500066; sigma[4] = 11397.81803454405; sigma[5] = 11189.78533159265; sigma[6] = 11565.269184852694; sigma[7] = 11447.654181380469; sigma[8] = 9164.617128294052; sigma[9] = 9099.771490408253; sigma[10] = 10984.234983618122; sigma[11] = 10152.79621162738; sigma[12] = 10825.978567240812; sigma[13] = 11502.803936222297; sigma[14] = 12562.193848722296; sigma[15] = 10764.715477425989; sigma[16] = 10009.065253294055; sigma[17] = 9389.974533290195; sigma[18] = 8939.232484544047; sigma[19] = 8278.310114925993; sigma[20] = 7974.545198259326; sigma[21] = 8361.1478848334; sigma[22] = 8078.365173259327; sigma[23] = 7094.946902888955; sigma[24] = 12285.08925273463; sigma[25] = 8893.600401210717; sigma[26] = 9375.962981592662; sigma[27] = 10687.70198940516; sigma[28] = 10763.95262742599; sigma[29] = 11189.699148567966; sigma[30] = 11340.409528814884; sigma[31] = 10164.607880840347;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 3467.357916666668; theta[1] = 3468.688194444444; theta[2] = 3466.738750000002; theta[3] = 3469.344166666665; theta[4] = 3467.844861111112; theta[5] = 3469.476388888888; theta[6] = 3468.366250000001; theta[7] = 3467.290972222222; theta[8] = 3466.920694444444; theta[9] = 3466.818055555556; theta[10] = 3466.749861111112; theta[11] = 3469.282916666666; theta[12] = 3469.735277777778; theta[13] = 3467.239027777776; theta[14] = 3466.824583333333; theta[15] = 3467.803888888889; theta[16] = 3467.255972222222; theta[17] = 3467.78111111111; theta[18] = 3466.824305555556; theta[19] = 3467.518194444443; theta[20] = 3468.323611111111; theta[21] = 3467.194444444444; theta[22] = 3468.22236111111; theta[23] = 3468.148472222222; theta[24] = 3468.380277777778; theta[25] = 3467.47013888889; theta[26] = 3467.47513888889; theta[27] = 3467.549583333332; theta[28] = 3467.15625; theta[29] = 3466.575277777778; theta[30] = 3466.75736111111; theta[31] = 3467.015833333333;
                        sigma[0] = 407.086845790193; sigma[1] = 513.376949648218; sigma[2] = 411.078998567969; sigma[3] = 529.886875824914; sigma[4] = 452.956754277847; sigma[5] = 465.209044034792; sigma[6] = 488.362474956859; sigma[7] = 365.17460474081; sigma[8] = 337.127738537106; sigma[9] = 339.696386627384; sigma[10] = 342.325502888959; sigma[11] = 840.958480512415; sigma[12] = 1335.308895886642; sigma[13] = 345.833890851921; sigma[14] = 296.331715234636; sigma[15] = 292.004311395904; sigma[16] = 389.56946724081; sigma[17] = 354.380794729236; sigma[18] = 280.201092703774; sigma[19] = 359.831085759328; sigma[20] = 555.596607923681; sigma[21] = 387.935220655163; sigma[22] = 406.089955666736; sigma[23] = 327.209828351921; sigma[24] = 382.092604219976; sigma[25] = 349.521266777847; sigma[26] = 316.913009833403; sigma[27] = 334.637363845748; sigma[28] = 315.575233290192; sigma[29] = 288.774790331088; sigma[30] = 327.374618166736; sigma[31] = 367.088128602693;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 4359.710833333334; theta[1] = 4344.91638888889; theta[2] = 4350.555; theta[3] = 4364.603055555556; theta[4] = 4357.481388888888; theta[5] = 4338.536111111112; theta[6] = 4352.732222222224; theta[7] = 4352.170555555556; theta[8] = 4345.671388888888; theta[9] = 4360.684166666667; theta[10] = 4345.831111111112; theta[11] = 4343.706666666668; theta[12] = 4339.646388888888; theta[13] = 4339.406111111112; theta[14] = 4343.144444444444; theta[15] = 4358.527777777778; theta[16] = 4340.270833333332; theta[17] = 4325.685000000002; theta[18] = 4339.802222222222; theta[19] = 4333.386388888888; theta[20] = 4335.98888888889; theta[21] = 4344.165000000001; theta[22] = 4352.703333333333; theta[23] = 4335.725833333334; theta[24] = 4357.483055555556; theta[25] = 4341.75138888889; theta[26] = 4360.994166666668; theta[27] = 4347.312222222224; theta[28] = 4352.27388888889; theta[29] = 4342.541666666666; theta[30] = 4342.126666666667; theta[31] = 4326.137222222224;
                        sigma[0] = 36082.68645638047; sigma[1] = 40574.50949959036; sigma[2] = 37739.7718070749; sigma[3] = 42307.304892182925; sigma[4] = 45450.860205145895; sigma[5] = 42358.611333618115; sigma[6] = 45257.168877136624; sigma[7] = 43914.98474843292; sigma[8] = 41785.2105273681; sigma[9] = 47627.73595638047; sigma[10] = 44150.58299195144; sigma[11] = 42295.467559852696; sigma[12] = 46872.83999403475; sigma[13] = 40498.40290584034; sigma[14] = 43691.488928988496; sigma[15] = 50556.4884438033; sigma[16] = 46866.171750824935; sigma[17] = 45170.078123741594; sigma[18] = 46182.96476046996; sigma[19] = 45323.2157551459; sigma[20] = 47808.63832528478; sigma[21] = 43269.394440408265; sigma[22] = 46961.65181540826; sigma[23] = 49767.859150824916; sigma[24] = 49525.7454810718; sigma[25] = 56148.53162736812; sigma[26] = 54722.52390638047; sigma[27] = 60668.90534380327; sigma[28] = 54635.56938361814; sigma[29] = 45191.51618485269; sigma[30] = 48670.90732651939; sigma[31] = 42625.23404102552;
                        votes[2] = 0.1 - gauss(x, theta, sigma);
                        theta[0] = 4326.203333333334; theta[1] = 4325.81111111111; theta[2] = 4326.901388888888; theta[3] = 4328.124166666668; theta[4] = 4326.185277777778; theta[5] = 4324.338055555556; theta[6] = 4330.419166666666; theta[7] = 4324.866944444442; theta[8] = 4326.549166666668; theta[9] = 4326.389444444445; theta[10] = 4327.299444444445; theta[11] = 4326.598055555554; theta[12] = 4328.116666666667; theta[13] = 4326.251666666667; theta[14] = 4327.307499999999; theta[15] = 4328.498333333333; theta[16] = 4331.529444444444; theta[17] = 4329.081944444445; theta[18] = 4332.538888888888; theta[19] = 4331.56861111111; theta[20] = 4331.686944444443; theta[21] = 4332.727222222222; theta[22] = 4331.589999999999; theta[23] = 4330.053055555556; theta[24] = 4333.1; theta[25] = 4332.735555555555; theta[26] = 4332.66; theta[27] = 4333.348055555555; theta[28] = 4334.887777777778; theta[29] = 4331.511388888889; theta[30] = 4333.012222222222; theta[31] = 4331.027222222222;
                        sigma[0] = 2535.509004297138; sigma[1] = 2495.958036395898; sigma[2] = 2435.72849403479; sigma[3] = 2746.90146749158; sigma[4] = 2776.7803014422; sigma[5] = 2730.726019960717; sigma[6] = 2791.782695269362; sigma[7] = 3102.498208849596; sigma[8] = 2753.085423047142; sigma[9] = 3146.652848432945; sigma[10] = 3028.157020655164; sigma[11] = 3427.38671440516; sigma[12] = 3306.560026519364; sigma[13] = 3628.461401519358; sigma[14] = 3168.973650824917; sigma[15] = 3434.33915151936; sigma[16] = 3501.31727621072; sigma[17] = 3394.99206996071; sigma[18] = 3075.233519729232; sigma[19] = 3134.27187181256; sigma[20] = 2891.932203294048; sigma[21] = 2985.966668803306; sigma[22] = 3081.071520963804; sigma[23] = 3214.082792182942; sigma[24] = 3105.818732074917; sigma[25] = 3077.413551210722; sigma[26] = 2933.519154297134; sigma[27] = 3364.80434218294; sigma[28] = 2907.831643803303; sigma[29] = 3280.84501070145; sigma[30] = 3226.397254914426; sigma[31] = 3142.371391025532;
                        votes[3] = 0.1 - gauss(x, theta, sigma);
                        theta[0] = 4675.802083333333; theta[1] = 4679.654305555554; theta[2] = 4684.471805555556; theta[3] = 4689.574305555555; theta[4] = 4689.504999999998; theta[5] = 4686.100000000001; theta[6] = 4684.947777777778; theta[7] = 4687.2; theta[8] = 4681.601944444444; theta[9] = 4678.101527777777; theta[10] = 4687.157916666667; theta[11] = 4687.294166666667; theta[12] = 4687.556944444444; theta[13] = 4687.822916666666; theta[14] = 4687.780972222222; theta[15] = 4685.088333333332; theta[16] = 4683.397916666667; theta[17] = 4687.295277777777; theta[18] = 4683.541527777777; theta[19] = 4688.25236111111; theta[20] = 4680.162222222223; theta[21] = 4680.538333333334; theta[22] = 4685.785555555553; theta[23] = 4679.11486111111; theta[24] = 4687.556388888889; theta[25] = 4674.822222222224; theta[26] = 4679.368194444443; theta[27] = 4683.947222222222; theta[28] = 4682.137083333332; theta[29] = 4675.625972222221; theta[30] = 4678.963055555555; theta[31] = 4675.53111111111;
                        sigma[0] = 9083.969776345746; sigma[1] = 9734.749164926006; sigma[2] = 11817.709102425993; sigma[3] = 9880.675028814874; sigma[4] = 12976.001387630464; sigma[5] = 9897.052862630479; sigma[6] = 11428.07298824775; sigma[7] = 10619.684945963805; sigma[8] = 8811.089028294045; sigma[9] = 10584.064661685248; sigma[10] = 12133.843681901297; sigma[11] = 10159.716834158253; sigma[12] = 12259.109297738492; sigma[13] = 9432.92129162352; sigma[14] = 9335.192818629706; sigma[15] = 10729.159782074916; sigma[16] = 9780.778918012407; sigma[17] = 9471.854190331089; sigma[18] = 9812.65037835193; sigma[19] = 9218.914825111182; sigma[20] = 9575.503846581094; sigma[21] = 9500.231643186024; sigma[22] = 9433.758387321826; sigma[23] = 8422.209515388955; sigma[24] = 9143.936696812561; sigma[25] = 9106.300496581078; sigma[26] = 10460.588102425994; sigma[27] = 10912.855754914428; sigma[28] = 9450.26544162353; sigma[29] = 9739.9083061297; sigma[30] = 9226.858128294056; sigma[31] = 8867.435041951461;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 4899.072361111113; theta[1] = 4898.066666666665; theta[2] = 4897.561527777778; theta[3] = 4897.843888888889; theta[4] = 4898.12611111111; theta[5] = 4900.744722222224; theta[6] = 4902.995833333333; theta[7] = 4906.23861111111; theta[8] = 4907.771805555556; theta[9] = 4908.448472222221; theta[10] = 4907.856666666666; theta[11] = 4905.815277777776; theta[12] = 4902.539861111112; theta[13] = 4903.399861111112; theta[14] = 4900.692777777777; theta[15] = 4899.337916666667; theta[16] = 4896.598611111111; theta[17] = 4897.704305555555; theta[18] = 4897.448055555553; theta[19] = 4899.624166666666; theta[20] = 4900.222916666665; theta[21] = 4900.617222222221; theta[22] = 4899.742222222223; theta[23] = 4901.808194444445; theta[24] = 4899.98888888889; theta[25] = 4901.020416666666; theta[26] = 4900.900277777777; theta[27] = 4900.796527777776; theta[28] = 4899.759444444445; theta[29] = 4902.488333333333; theta[30] = 4901.0125; theta[31] = 4901.058333333333;
                        sigma[0] = 24645.672233444497; sigma[1] = 24276.605259852717; sigma[2] = 24725.75140335192; sigma[3] = 24651.9913502848; sigma[4] = 24730.39126139588; sigma[5] = 23879.76354866442; sigma[6] = 24598.091925824912; sigma[7] = 25046.032471812563; sigma[8] = 26169.061307981556; sigma[9] = 26362.28525335194; sigma[10] = 25497.559620963795; sigma[11] = 24619.622684775542; sigma[12] = 24345.814008444515; sigma[13] = 23775.979011222316; sigma[14] = 24280.60403546999; sigma[15] = 23422.917948567992; sigma[16] = 25008.37864681256; sigma[17] = 24024.94299270378; sigma[18] = 24103.98583940515; sigma[19] = 23731.021106380467; sigma[20] = 23334.74312773463; sigma[21] = 22291.128768803315; sigma[22] = 23951.47634658109; sigma[23] = 23163.587510759306; sigma[24] = 23433.890169729228; sigma[25] = 22993.1346832902; sigma[26] = 23747.24476810886; sigma[27] = 22867.549207518576; sigma[28] = 24824.662290099586; sigma[29] = 23998.22485151936; sigma[30] = 24644.05206749158; sigma[31] = 24132.832401519358;
                        votes[5] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 6; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }