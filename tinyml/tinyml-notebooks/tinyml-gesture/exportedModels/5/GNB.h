#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 0.086482060073; theta[1] = -0.02019333047; theta[2] = -0.032064887605; theta[3] = 0.000594744716; theta[4] = 0.093583711498; theta[5] = 0.196629546225; theta[6] = 0.418823993477; theta[7] = 0.529814167746; theta[8] = 0.614846121466; theta[9] = 0.567222918067; theta[10] = 0.487873424571; theta[11] = 0.415779065252; theta[12] = 0.300529584192; theta[13] = 0.198736359987; theta[14] = 0.100647342625; theta[15] = 0.088733585603; theta[16] = 0.032180931884; theta[17] = 0.05436246781; theta[18] = 0.098613005445; theta[19] = 0.164142557023; theta[20] = 0.176961424372; theta[21] = 0.249776317401; theta[22] = 0.261793785899; theta[23] = 0.318357370294; theta[24] = 0.441270011588; theta[25] = 0.456678694714; theta[26] = 0.522658416662; theta[27] = 0.597926794565; theta[28] = 0.603340476053; theta[29] = 0.51580264271; theta[30] = 0.414522154326; theta[31] = 0.259250081554;
                        sigma[0] = 0.275282394421; sigma[1] = 0.246830087176; sigma[2] = 0.247328031748; sigma[3] = 0.228314118911; sigma[4] = 0.26111040828; sigma[5] = 0.290919300675; sigma[6] = 0.385035930225; sigma[7] = 0.363964150126; sigma[8] = 0.472405095557; sigma[9] = 0.610602726904; sigma[10] = 0.751042243532; sigma[11] = 0.97744717443; sigma[12] = 0.859451978216; sigma[13] = 0.711270484316; sigma[14] = 0.37078371964; sigma[15] = 0.415658319127; sigma[16] = 0.373801426301; sigma[17] = 0.388543602951; sigma[18] = 0.797053892216; sigma[19] = 1.975780868901; sigma[20] = 2.597870420809; sigma[21] = 3.763855777895; sigma[22] = 3.024595838355; sigma[23] = 5.658338780744; sigma[24] = 7.797388824804; sigma[25] = 7.820334488783; sigma[26] = 9.249399730375; sigma[27] = 11.20099066966; sigma[28] = 10.681316609112; sigma[29] = 7.357889479384; sigma[30] = 3.547345554917; sigma[31] = 1.388133711398;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.119523285362; theta[1] = -0.097124777794; theta[2] = -0.006284259984; theta[3] = -0.027049663806; theta[4] = -0.041608610096; theta[5] = -0.132202537619; theta[6] = -0.031132246584; theta[7] = 0.037659982136; theta[8] = 0.166880736468; theta[9] = 0.338684675465; theta[10] = 0.886554883548; theta[11] = 1.340648742822; theta[12] = 1.639749341393; theta[13] = 2.014554760775; theta[14] = 2.088549235955; theta[15] = 2.322942735281; theta[16] = 2.449422827956; theta[17] = 2.443850725244; theta[18] = 2.604851660804; theta[19] = 2.633634753902; theta[20] = 2.569910541505; theta[21] = 2.617511735173; theta[22] = 2.206149908714; theta[23] = 2.199597771118; theta[24] = 2.164524765011; theta[25] = 1.745292896847; theta[26] = 1.51286006298; theta[27] = 1.306841518651; theta[28] = 0.919801355186; theta[29] = 0.95765945025; theta[30] = 0.939809752356; theta[31] = 0.98048919726;
                        sigma[0] = 0.461247426216; sigma[1] = 0.387944846544; sigma[2] = 0.48766934957; sigma[3] = 0.565881608911; sigma[4] = 0.451354010198; sigma[5] = 0.44283938479; sigma[6] = 0.488145424468; sigma[7] = 0.508538435666; sigma[8] = 0.66342952521; sigma[9] = 0.913181329656; sigma[10] = 1.887659154544; sigma[11] = 3.539480191351; sigma[12] = 3.536800753731; sigma[13] = 4.530816689597; sigma[14] = 3.620089535755; sigma[15] = 4.217614990511; sigma[16] = 4.005317205953; sigma[17] = 4.193899559051; sigma[18] = 5.160369910224; sigma[19] = 7.055690165043; sigma[20] = 8.867392123179; sigma[21] = 11.338882372248; sigma[22] = 9.723704148732; sigma[23] = 11.826194347449; sigma[24] = 13.861797330234; sigma[25] = 13.454838210589; sigma[26] = 11.546904030616; sigma[27] = 9.808089389297; sigma[28] = 5.418809834669; sigma[29] = 5.142998004844; sigma[30] = 5.687396101326; sigma[31] = 7.933529468465;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.670283400522; theta[1] = 0.405309022511; theta[2] = 0.22001859404; theta[3] = 0.162555244106; theta[4] = 0.202987510542; theta[5] = 0.189349647958; theta[6] = 0.266710397256; theta[7] = 0.297576089121; theta[8] = 0.315138775191; theta[9] = 0.240096306593; theta[10] = 0.144353397741; theta[11] = 0.262354944349; theta[12] = 0.230300817314; theta[13] = 0.169049852195; theta[14] = 0.136544421757; theta[15] = 0.152205896391; theta[16] = 0.141047068765; theta[17] = 0.133145510972; theta[18] = 0.157997138843; theta[19] = 0.109731092437; theta[20] = 0.197355416725; theta[21] = 0.174079758357; theta[22] = 0.186418847382; theta[23] = 0.245480427046; theta[24] = 0.309691939568; theta[25] = 0.374515836349; theta[26] = 0.473356168168; theta[27] = 0.408558419692; theta[28] = 0.401177969537; theta[29] = 0.408715700175; theta[30] = 0.426314292076; theta[31] = 0.360165365988;
                        sigma[0] = 0.766951235106; sigma[1] = 0.904135310118; sigma[2] = 0.74026447901; sigma[3] = 0.887898542757; sigma[4] = 0.77381543247; sigma[5] = 0.592749831178; sigma[6] = 0.650635085129; sigma[7] = 0.600338654821; sigma[8] = 0.644178745273; sigma[9] = 0.935989409205; sigma[10] = 0.729059639001; sigma[11] = 1.076092503814; sigma[12] = 0.825733293655; sigma[13] = 0.855905791566; sigma[14] = 0.502015439456; sigma[15] = 0.623038121733; sigma[16] = 0.606617120447; sigma[17] = 0.491111162242; sigma[18] = 0.644474811949; sigma[19] = 0.650537399347; sigma[20] = 0.895031697858; sigma[21] = 0.992040239021; sigma[22] = 0.698779717587; sigma[23] = 0.980737683715; sigma[24] = 0.98741775503; sigma[25] = 1.050043449853; sigma[26] = 1.246024984947; sigma[27] = 1.293674829194; sigma[28] = 1.199831967754; sigma[29] = 1.287803052604; sigma[30] = 1.401714177724; sigma[31] = 1.492070219788;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.54470364489; theta[1] = 0.457859429957; theta[2] = 0.354549268273; theta[3] = 0.157068322127; theta[4] = 0.159476085298; theta[5] = 0.105624760475; theta[6] = 0.045165011068; theta[7] = -0.108788766044; theta[8] = -0.141403574458; theta[9] = -0.1430221635; theta[10] = -0.116282438617; theta[11] = -0.044139012883; theta[12] = 0.083884955424; theta[13] = 0.064796905222; theta[14] = 0.069616290355; theta[15] = 0.070989426818; theta[16] = 0.125586642411; theta[17] = 0.125920366254; theta[18] = 0.169288197471; theta[19] = 0.147460984394; theta[20] = 0.251636501209; theta[21] = 0.399794277317; theta[22] = 0.439720557218; theta[23] = 0.602263064244; theta[24] = 0.684502553758; theta[25] = 0.71617059664; theta[26] = 0.806246063753; theta[27] = 0.800079442244; theta[28] = 0.789808304859; theta[29] = 0.831670817; theta[30] = 0.887828109151; theta[31] = 0.776965446287;
                        sigma[0] = 0.620711259176; sigma[1] = 0.819562087282; sigma[2] = 1.036920417855; sigma[3] = 1.035725974446; sigma[4] = 0.857940073626; sigma[5] = 0.726194481642; sigma[6] = 0.521066030505; sigma[7] = 0.168363886984; sigma[8] = 0.187250127995; sigma[9] = 0.302611241551; sigma[10] = 0.475703676297; sigma[11] = 0.789829165492; sigma[12] = 1.252206593372; sigma[13] = 1.042185376574; sigma[14] = 0.750329927671; sigma[15] = 0.642078958644; sigma[16] = 0.776835297303; sigma[17] = 1.036855358448; sigma[18] = 1.328450348773; sigma[19] = 2.001363666086; sigma[20] = 2.554879984047; sigma[21] = 3.922426014513; sigma[22] = 4.092067225054; sigma[23] = 5.005014825497; sigma[24] = 6.203663334065; sigma[25] = 5.578269280696; sigma[26] = 5.792941590022; sigma[27] = 6.316624072525; sigma[28] = 5.956420706422; sigma[29] = 5.871508773991; sigma[30] = 5.977593936727; sigma[31] = 5.468115497292;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.196097974745; theta[1] = -0.14690823462; theta[2] = -0.071287378766; theta[3] = -0.039579886846; theta[4] = 0.130602305128; theta[5] = 0.114363900687; theta[6] = 0.260334389324; theta[7] = 0.368479660556; theta[8] = 0.38965473841; theta[9] = 0.41321179813; theta[10] = 0.405945905576; theta[11] = 0.394749303286; theta[12] = 0.367444739407; theta[13] = 0.410800335754; theta[14] = 0.438361746608; theta[15] = 0.453277533612; theta[16] = 0.456944797126; theta[17] = 0.441743886602; theta[18] = 0.52689718294; theta[19] = 0.479912364946; theta[20] = 0.394298694951; theta[21] = 0.4312078044; theta[22] = 0.47474719265; theta[23] = 0.365327776737; theta[24] = 0.384547083566; theta[25] = 0.33994754242; theta[26] = 0.289090105519; theta[27] = 0.277409352842; theta[28] = 0.194025597961; theta[29] = 0.217559484803; theta[30] = 0.230518789738; theta[31] = 0.157075104765;
                        sigma[0] = 0.453956226402; sigma[1] = 0.398533001556; sigma[2] = 0.488530599316; sigma[3] = 0.59708929717; sigma[4] = 0.626993863326; sigma[5] = 0.420995479493; sigma[6] = 0.456563577135; sigma[7] = 0.472475101024; sigma[8] = 0.399210162485; sigma[9] = 0.529478778541; sigma[10] = 0.614287619449; sigma[11] = 0.676769243968; sigma[12] = 0.641890119356; sigma[13] = 0.543479308336; sigma[14] = 0.4777376073; sigma[15] = 0.522178368994; sigma[16] = 0.577529703675; sigma[17] = 0.65729033315; sigma[18] = 0.864283927687; sigma[19] = 0.937350906474; sigma[20] = 0.995138757323; sigma[21] = 1.229016371259; sigma[22] = 2.447433258086; sigma[23] = 1.289090794997; sigma[24] = 1.308866602755; sigma[25] = 1.256292992607; sigma[26] = 1.360470657278; sigma[27] = 1.174585798624; sigma[28] = 0.967041407834; sigma[29] = 1.152848715668; sigma[30] = 1.051111611256; sigma[31] = 0.835309272979;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }