#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[4] = { 0.0f };
                        float theta[42] = { 0 };
                        float sigma[42] = { 0 };
                        theta[0] = 0.062875; theta[1] = -0.043; theta[2] = 0.953625; theta[3] = 0.071125; theta[4] = 0.02925; theta[5] = 0.98725; theta[6] = 0.075625; theta[7] = 0.036375; theta[8] = 1.059125; theta[9] = 0.080875; theta[10] = -0.1355; theta[11] = 1.03625; theta[12] = 0.12025; theta[13] = -0.060625; theta[14] = 0.837875; theta[15] = 0.159125; theta[16] = 0.111875; theta[17] = 0.86425; theta[18] = 0.116875; theta[19] = 0.145625; theta[20] = 1.017875; theta[21] = 0.06975; theta[22] = 0.080125; theta[23] = 1.018625; theta[24] = 0.055625; theta[25] = 0.01325; theta[26] = 0.984; theta[27] = 0.0575; theta[28] = -0.005; theta[29] = 0.98075; theta[30] = 0.06375; theta[31] = 0.018625; theta[32] = 0.980125; theta[33] = 0.066375; theta[34] = 0.025125; theta[35] = 0.97925; theta[36] = 0.069875; theta[37] = 0.022625; theta[38] = 0.9765; theta[39] = 0.07325; theta[40] = 0.02525; theta[41] = 0.974625;
                        sigma[0] = 0.001172984406; sigma[1] = 0.001561000031; sigma[2] = 0.023753109406; sigma[3] = 0.001144984406; sigma[4] = 0.005249437531; sigma[5] = 0.013934937531; sigma[6] = 0.001939609406; sigma[7] = 0.007950609406; sigma[8] = 0.003107984406; sigma[9] = 0.001760484406; sigma[10] = 0.003787250031; sigma[11] = 0.006873437531; sigma[12] = 0.001197437531; sigma[13] = 0.008033359406; sigma[14] = 0.006856734406; sigma[15] = 0.001482984406; sigma[16] = 0.009345234406; sigma[17] = 0.006926937531; sigma[18] = 0.001773984406; sigma[19] = 0.005592109406; sigma[20] = 0.002921734406; sigma[21] = 0.001687437531; sigma[22] = 0.003903734406; sigma[23] = 0.003111859406; sigma[24] = 0.001207109406; sigma[25] = 0.004296937531; sigma[26] = 0.000956500031; sigma[27] = 0.001196250031; sigma[28] = 0.003240000031; sigma[29] = 0.000796937531; sigma[30] = 0.001313437531; sigma[31] = 0.002839359406; sigma[32] = 0.000458734406; sigma[33] = 0.001290609406; sigma[34] = 0.001949984406; sigma[35] = 0.000471937531; sigma[36] = 0.001336234406; sigma[37] = 0.002126859406; sigma[38] = 0.000445250031; sigma[39] = 0.002026937531; sigma[40] = 0.001864937531; sigma[41] = 0.000474859406;
                        votes[0] = 0.25 - gauss(x, theta, sigma);
                        theta[0] = 0.06575; theta[1] = -0.051375; theta[2] = 0.949875; theta[3] = 0.06525; theta[4] = -0.028875; theta[5] = 0.96575; theta[6] = 0.0805; theta[7] = 0.01725; theta[8] = 1.0735; theta[9] = 0.084375; theta[10] = -0.08675; theta[11] = 1.065; theta[12] = 0.142625; theta[13] = -0.039375; theta[14] = 0.80525; theta[15] = 0.1665; theta[16] = -0.01775; theta[17] = 0.84725; theta[18] = 0.1265; theta[19] = 0.0605; theta[20] = 1.012; theta[21] = 0.077; theta[22] = 0.060875; theta[23] = 1.042375; theta[24] = 0.043125; theta[25] = -0.029875; theta[26] = 1.001; theta[27] = 0.047375; theta[28] = -0.039625; theta[29] = 0.984625; theta[30] = 0.0615; theta[31] = -0.0115; theta[32] = 0.985625; theta[33] = 0.0665; theta[34] = -0.003; theta[35] = 0.980375; theta[36] = 0.062125; theta[37] = -0.012625; theta[38] = 0.982375; theta[39] = 0.063375; theta[40] = -0.011625; theta[41] = 0.9845;
                        sigma[0] = 0.001454437531; sigma[1] = 0.002286859406; sigma[2] = 0.023876234406; sigma[3] = 0.002499937531; sigma[4] = 0.004034984406; sigma[5] = 0.002314437531; sigma[6] = 0.002139750031; sigma[7] = 0.007594937531; sigma[8] = 0.006097750031; sigma[9] = 0.001807109406; sigma[10] = 0.006964437531; sigma[11] = 0.007135000031; sigma[12] = 0.002066859406; sigma[13] = 0.002475859406; sigma[14] = 0.010644937531; sigma[15] = 0.003862750031; sigma[16] = 0.006187437531; sigma[17] = 0.007577437531; sigma[18] = 0.003427750031; sigma[19] = 0.014704750031; sigma[20] = 0.006431000031; sigma[21] = 0.004083500031; sigma[22] = 0.008405484406; sigma[23] = 0.002388109406; sigma[24] = 0.001876484406; sigma[25] = 0.003956234406; sigma[26] = 0.001354000031; sigma[27] = 0.001596859406; sigma[28] = 0.003821109406; sigma[29] = 0.001194859406; sigma[30] = 0.001595250031; sigma[31] = 0.003400250031; sigma[32] = 0.000682109406; sigma[33] = 0.001830250031; sigma[34] = 0.004131000031; sigma[35] = 0.000561109406; sigma[36] = 0.001659234406; sigma[37] = 0.003224359406; sigma[38] = 0.000688109406; sigma[39] = 0.001437359406; sigma[40] = 0.004043609406; sigma[41] = 0.000544750031;
                        votes[1] = 0.25 - gauss(x, theta, sigma);
                        theta[0] = 0.0095; theta[1] = 0.005625; theta[2] = 0.97075; theta[3] = 0.0115; theta[4] = 0.039; theta[5] = 0.966375; theta[6] = 0.009375; theta[7] = 0.06325; theta[8] = 1.110875; theta[9] = 0.028125; theta[10] = -0.125625; theta[11] = 1.10325; theta[12] = 0.1015; theta[13] = -0.064875; theta[14] = 0.864125; theta[15] = 0.171875; theta[16] = 0.10375; theta[17] = 0.771875; theta[18] = 0.1605; theta[19] = 0.157375; theta[20] = 0.881625; theta[21] = 0.085375; theta[22] = 0.1435; theta[23] = 1.005625; theta[24] = 0.01325; theta[25] = 0.07675; theta[26] = 1.039125; theta[27] = -0.02025; theta[28] = 0.0315; theta[29] = 1.011125; theta[30] = -0.01675; theta[31] = 0.0355; theta[32] = 0.992625; theta[33] = -0.016375; theta[34] = 0.0305; theta[35] = 0.976875; theta[36] = -0.007375; theta[37] = 0.03225; theta[38] = 0.977625; theta[39] = -0.009375; theta[40] = 0.01975; theta[41] = 0.986375;
                        sigma[0] = 0.002557250031; sigma[1] = 0.001932109406; sigma[2] = 0.012476937531; sigma[3] = 0.002845250031; sigma[4] = 0.005076500031; sigma[5] = 0.001235609406; sigma[6] = 0.004475859406; sigma[7] = 0.017781937531; sigma[8] = 0.006437984406; sigma[9] = 0.005350234406; sigma[10] = 0.022032109406; sigma[11] = 0.006689437531; sigma[12] = 0.004372750031; sigma[13] = 0.017532484406; sigma[14] = 0.010929234406; sigma[15] = 0.002962734406; sigma[16] = 0.012043437531; sigma[17] = 0.003892734406; sigma[18] = 0.003624750031; sigma[19] = 0.016794359406; sigma[20] = 0.008591109406; sigma[21] = 0.004964859406; sigma[22] = 0.017242750031; sigma[23] = 0.005422109406; sigma[24] = 0.003836937531; sigma[25] = 0.009276937531; sigma[26] = 0.001825484406; sigma[27] = 0.003697437531; sigma[28] = 0.004955250031; sigma[29] = 0.001979984406; sigma[30] = 0.004386937531; sigma[31] = 0.004034750031; sigma[32] = 0.001206859406; sigma[33] = 0.004215609406; sigma[34] = 0.002214750031; sigma[35] = 0.000871484406; sigma[36] = 0.003746859406; sigma[37] = 0.001599937531; sigma[38] = 0.000630609406; sigma[39] = 0.003438359406; sigma[40] = 0.001789937531; sigma[41] = 0.000718109406;
                        votes[2] = 0.25 - gauss(x, theta, sigma);
                        theta[0] = 0.086375; theta[1] = -0.03425; theta[2] = 0.980625; theta[3] = 0.085125; theta[4] = -0.014; theta[5] = 0.959125; theta[6] = 0.094625; theta[7] = 0.01825; theta[8] = 1.072; theta[9] = 0.10475; theta[10] = -0.075875; theta[11] = 1.01025; theta[12] = 0.145125; theta[13] = 0.005625; theta[14] = 0.788625; theta[15] = 0.13475; theta[16] = 0.080125; theta[17] = 0.941; theta[18] = 0.10025; theta[19] = 0.085375; theta[20] = 1.092625; theta[21] = 0.09175; theta[22] = -0.0105; theta[23] = 1.0325; theta[24] = 0.12075; theta[25] = -0.00125; theta[26] = 0.8785; theta[27] = 0.131875; theta[28] = 0.05725; theta[29] = 0.9005; theta[30] = 0.100875; theta[31] = 0.077; theta[32] = 1.00775; theta[33] = 0.063125; theta[34] = 0.01125; theta[35] = 1.016875; theta[36] = 0.055375; theta[37] = -0.04025; theta[38] = 0.987375; theta[39] = 0.06; theta[40] = -0.031375; theta[41] = 0.978;
                        sigma[0] = 0.001010609406; sigma[1] = 0.001714437531; sigma[2] = 0.000438359406; sigma[3] = 0.001387484406; sigma[4] = 0.002911500031; sigma[5] = 0.000880484406; sigma[6] = 0.001677359406; sigma[7] = 0.006066937531; sigma[8] = 0.006308500031; sigma[9] = 0.001617437531; sigma[10] = 0.002581734406; sigma[11] = 0.011714937531; sigma[12] = 0.001772484406; sigma[13] = 0.002927109406; sigma[14] = 0.005149359406; sigma[15] = 0.001697437531; sigma[16] = 0.005021234406; sigma[17] = 0.008934000031; sigma[18] = 0.001924937531; sigma[19] = 0.007317359406; sigma[20] = 0.005134359406; sigma[21] = 0.001549437531; sigma[22] = 0.004029750031; sigma[23] = 0.010536250031; sigma[24] = 0.001776937531; sigma[25] = 0.002578437531; sigma[26] = 0.007712750031; sigma[27] = 0.002405234406; sigma[28] = 0.005734937531; sigma[29] = 0.008309750031; sigma[30] = 0.003090484406; sigma[31] = 0.006368500031; sigma[32] = 0.004804937531; sigma[33] = 0.002691484406; sigma[34] = 0.009880937531; sigma[35] = 0.002166484406; sigma[36] = 0.001607359406; sigma[37] = 0.003759937531; sigma[38] = 0.001096859406; sigma[39] = 0.001442500031; sigma[40] = 0.001916859406; sigma[41] = 0.000436000031;
                        votes[3] = 0.25 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 4; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 42; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }