#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[3] = { 0.0f };
                        float theta[60] = { 0 };
                        float sigma[60] = { 0 };
                        theta[0] = -0.003287553648; theta[1] = 0.089982832618; theta[2] = 0.979459227468; theta[3] = -0.003424892704; theta[4] = 0.088892703863; theta[5] = 0.979639484979; theta[6] = -0.003399141631; theta[7] = 0.088497854077; theta[8] = 0.980025751073; theta[9] = -0.004; theta[10] = 0.088738197425; theta[11] = 0.979819742489; theta[12] = -0.004678111588; theta[13] = 0.087879828326; theta[14] = 0.979811158798; theta[15] = -0.004472103004; theta[16] = 0.088446351931; theta[17] = 0.979733905579; theta[18] = -0.003442060086; theta[19] = 0.089004291845; theta[20] = 0.979579399142; theta[21] = -0.003364806867; theta[22] = 0.089055793991; theta[23] = 0.980180257511; theta[24] = -0.004326180258; theta[25] = 0.088163090129; theta[26] = 0.979785407725; theta[27] = -0.003210300429; theta[28] = 0.089321888412; theta[29] = 0.980231759657; theta[30] = -0.004420600858; theta[31] = 0.088128755365; theta[32] = 0.980231759657; theta[33] = -0.004180257511; theta[34] = 0.088721030043; theta[35] = 0.980231759657; theta[36] = -0.003819742489; theta[37] = 0.088635193133; theta[38] = 0.979716738197; theta[39] = -0.004240343348; theta[40] = 0.088901287554; theta[41] = 0.979433476395; theta[42] = -0.003871244635; theta[43] = 0.089210300429; theta[44] = 0.979433476395; theta[45] = -0.003356223176; theta[46] = 0.089030042918; theta[47] = 0.98060944206; theta[48] = -0.003630901288; theta[49] = 0.088420600858; theta[50] = 0.980145922747; theta[51] = -0.004274678112; theta[52] = 0.088669527897; theta[53] = 0.979321888412; theta[54] = -0.002944206009; theta[55] = 0.089459227468; theta[56] = 0.980120171674; theta[57] = -0.003502145923; theta[58] = 0.089570815451; theta[59] = 0.980721030043;
                        sigma[0] = 0.000957174828; sigma[1] = 0.000985750783; sigma[2] = 0.00059498654; sigma[3] = 0.001010673548; sigma[4] = 0.001040061454; sigma[5] = 0.000610170463; sigma[6] = 0.000942608931; sigma[7] = 0.00100864485; sigma[8] = 0.000610385608; sigma[9] = 0.001005974254; sigma[10] = 0.00101754949; sigma[11] = 0.000591469658; sigma[12] = 0.000982664633; sigma[13] = 0.001024946937; sigma[14] = 0.000590178936; sigma[15] = 0.000979227767; sigma[16] = 0.001032521805; sigma[17] = 0.000608255379; sigma[18] = 0.000982744502; sigma[19] = 0.001018064364; sigma[20] = 0.000567977606; sigma[21] = 0.001017175934; sigma[22] = 0.00106606127; sigma[23] = 0.000593014722; sigma[24] = 0.000983687603; sigma[25] = 0.001028042076; sigma[26] = 0.000603816616; sigma[27] = 0.000975445049; sigma[28] = 0.001031042315; sigma[29] = 0.000600718824; sigma[30] = 0.000967325246; sigma[31] = 0.001043880423; sigma[32] = 0.000579087923; sigma[33] = 0.000985873091; sigma[34] = 0.001023686129; sigma[35] = 0.000596598653; sigma[36] = 0.000983435323; sigma[37] = 0.001024317565; sigma[38] = 0.000597773845; sigma[39] = 0.000980646103; sigma[40] = 0.001001882965; sigma[41] = 0.000598477339; sigma[42] = 0.000971880423; sigma[43] = 0.001066844191; sigma[44] = 0.000585773476; sigma[45] = 0.000975602724; sigma[46] = 0.001046355325; sigma[47] = 0.00057894189; sigma[48] = 0.000996859479; sigma[49] = 0.001036990482; sigma[50] = 0.000585987295; sigma[51] = 0.000959752883; sigma[52] = 0.001044667617; sigma[53] = 0.000591729011; sigma[54] = 0.000973735089; sigma[55] = 0.001022969372; sigma[56] = 0.000599642216; sigma[57] = 0.000977949571; sigma[58] = 0.001011146278; sigma[59] = 0.000581454369;
                        votes[0] = 0.31216505895 - gauss(x, theta, sigma);
                        theta[0] = -0.053817537644; theta[1] = 0.000682019486; theta[2] = 0.98263064659; theta[3] = -0.054269264836; theta[4] = 0.000921169176; theta[5] = 0.982719220549; theta[6] = -0.053684676705; theta[7] = 0.000336581045; theta[8] = 0.982621789194; theta[9] = -0.053569530558; theta[10] = 0.000602302923; theta[11] = 0.982728077945; theta[12] = -0.054136403897; theta[13] = 0.000354295837; theta[14] = 0.982666076174; theta[15] = -0.053959255979; theta[16] = 0.000903454384; theta[17] = 0.9828255093; theta[18] = -0.054047829938; theta[19] = 0.000469441984; theta[20] = 0.982683790965; theta[21] = -0.053773250664; theta[22] = 0.000708591674; theta[23] = 0.982754650133; theta[24] = -0.054047829938; theta[25] = 0.000318866253; theta[26] = 0.982577502214; theta[27] = -0.053764393268; theta[28] = 0.000407440213; theta[29] = 0.982710363153; theta[30] = -0.053923826395; theta[31] = 0.000708591674; theta[32] = 0.982710363153; theta[33] = -0.053888396811; theta[34] = 0.000708591674; theta[35] = 0.982657218778; theta[36] = -0.053551815766; theta[37] = 0.000274579274; theta[38] = 0.982692648361; theta[39] = -0.053985828167; theta[40] = 0.000460584588; theta[41] = 0.982692648361; theta[42] = -0.053879539415; theta[43] = -8.857396e-06; theta[44] = 0.982577502214; theta[45] = -0.054100974314; theta[46] = 0.001098317095; theta[47] = 0.982852081488; theta[48] = -0.054118689105; theta[49] = 0.000504871568; theta[50] = 0.9828255093; theta[51] = -0.053596102746; theta[52] = 0.000203720106; theta[53] = 0.982736935341; theta[54] = -0.054056687334; theta[55] = 0.000690876882; theta[56] = 0.982816651904; theta[57] = -0.053737821081; theta[58] = 0.000549158547; theta[59] = 0.982754650133;
                        sigma[0] = 0.000310404268; sigma[1] = 0.000235938752; sigma[2] = 3.8163849e-05; sigma[3] = 0.000309319884; sigma[4] = 0.000248575721; sigma[5] = 3.9638617e-05; sigma[6] = 0.000303340789; sigma[7] = 0.000242579366; sigma[8] = 3.9361833e-05; sigma[9] = 0.000315247828; sigma[10] = 0.000247644322; sigma[11] = 3.8616054e-05; sigma[12] = 0.000305210805; sigma[13] = 0.000239024169; sigma[14] = 3.8330484e-05; sigma[15] = 0.000318336697; sigma[16] = 0.000241522128; sigma[17] = 4.028931e-05; sigma[18] = 0.000304164236; sigma[19] = 0.000238840745; sigma[20] = 3.841286e-05; sigma[21] = 0.000299668696; sigma[22] = 0.000251579391; sigma[23] = 3.8381792e-05; sigma[24] = 0.000300089834; sigma[25] = 0.000247196823; sigma[26] = 3.7732041e-05; sigma[27] = 0.000306024211; sigma[28] = 0.000241109462; sigma[29] = 3.8712395e-05; sigma[30] = 0.000313832998; sigma[31] = 0.00023971048; sigma[32] = 3.8180951e-05; sigma[33] = 0.000306315273; sigma[34] = 0.000249807912; sigma[35] = 3.828906e-05; sigma[36] = 0.000303327922; sigma[37] = 0.000234911325; sigma[38] = 3.7390925e-05; sigma[39] = 0.000312013976; sigma[40] = 0.000238051817; sigma[41] = 3.8453813e-05; sigma[42] = 0.000303638284; sigma[43] = 0.00023923819; sigma[44] = 3.7377745e-05; sigma[45] = 0.000304971209; sigma[46] = 0.000235109028; sigma[47] = 3.7215503e-05; sigma[48] = 0.000314745882; sigma[49] = 0.000243766367; sigma[50] = 3.6923499e-05; sigma[51] = 0.000310008705; sigma[52] = 0.000232819442; sigma[53] = 3.5999004e-05; sigma[54] = 0.000301169511; sigma[55] = 0.000238318088; sigma[56] = 3.7239196e-05; sigma[57] = 0.000304540656; sigma[58] = 0.00023796238; sigma[59] = 3.8027497e-05;
                        votes[1] = 0.302518756699 - gauss(x, theta, sigma);
                        theta[0] = 0.023372739917; theta[1] = 0.001780250348; theta[2] = 0.982559109875; theta[3] = 0.022906815021; theta[4] = 0.002016689847; theta[5] = 0.982948539638; theta[6] = 0.023372739917; theta[7] = 0.001794158554; theta[8] = 0.983344923505; theta[9] = 0.022934631433; theta[10] = 0.00152294854; theta[11] = 0.98269123783; theta[12] = 0.022531293463; theta[13] = 0.001801112656; theta[14] = 0.983136300417; theta[15] = 0.023470097357; theta[16] = 0.001773296245; theta[17] = 0.982726008345; theta[18] = 0.023282336579; theta[19] = 0.001835883171; theta[20] = 0.983045897079; theta[21] = 0.022781641168; theta[22] = 0.001696801113; theta[23] = 0.983344923505; theta[24] = 0.023254520167; theta[25] = 0.001425591099; theta[26] = 0.983052851182; theta[27] = 0.02326147427; theta[28] = 0.001724617524; theta[29] = 0.982906815021; theta[30] = 0.023108484006; theta[31] = 0.001662030598; theta[32] = 0.983282336579; theta[33] = 0.022913769124; theta[34] = 0.00230876217; theta[35] = 0.982767732962; theta[36] = 0.023226703755; theta[37] = 0.001279554937; theta[38] = 0.982586926287; theta[39] = 0.022781641168; theta[40] = 0.00202364395; theta[41] = 0.982941585535; theta[42] = 0.023136300417; theta[43] = 0.001724617524; theta[44] = 0.982607788595; theta[45] = 0.023212795549; theta[46] = 0.002155771905; theta[47] = 0.982538247566; theta[48] = 0.023303198887; theta[49] = 0.001363004172; theta[50] = 0.982781641168; theta[51] = 0.022837273992; theta[52] = 0.002134909597; theta[53] = 0.982663421419; theta[54] = 0.0230945758; theta[55] = 0.001961057024; theta[56] = 0.982343532684; theta[57] = 0.022892906815; theta[58] = 0.002343532684; theta[59] = 0.982712100139;
                        sigma[0] = 0.001283965381; sigma[1] = 0.00037972362; sigma[2] = 0.000878012853; sigma[3] = 0.001298782698; sigma[4] = 0.000364500422; sigma[5] = 0.00083261349; sigma[6] = 0.001293840207; sigma[7] = 0.000395529261; sigma[8] = 0.000844235692; sigma[9] = 0.001303627164; sigma[10] = 0.00039816742; sigma[11] = 0.000902284365; sigma[12] = 0.001301659318; sigma[13] = 0.000394600226; sigma[14] = 0.000868119118; sigma[15] = 0.001295538401; sigma[16] = 0.000397342212; sigma[17] = 0.000832624516; sigma[18] = 0.001258489137; sigma[19] = 0.000391622584; sigma[20] = 0.000897954783; sigma[21] = 0.001285725621; sigma[22] = 0.000397677199; sigma[23] = 0.00084952081; sigma[24] = 0.001279533277; sigma[25] = 0.0003983154; sigma[26] = 0.00085319749; sigma[27] = 0.00129068407; sigma[28] = 0.000387289955; sigma[29] = 0.000890994103; sigma[30] = 0.00130779213; sigma[31] = 0.000456695239; sigma[32] = 0.000854455757; sigma[33] = 0.001298950844; sigma[34] = 0.000807604254; sigma[35] = 0.000883716571; sigma[36] = 0.001279435397; sigma[37] = 0.000453021993; sigma[38] = 0.000880373186; sigma[39] = 0.00126611505; sigma[40] = 0.000897504314; sigma[41] = 0.000882515369; sigma[42] = 0.001287868771; sigma[43] = 0.000895773961; sigma[44] = 0.000870181363; sigma[45] = 0.001277021482; sigma[46] = 0.000842084224; sigma[47] = 0.000876241588; sigma[48] = 0.001316835753; sigma[49] = 0.000484373101; sigma[50] = 0.000875016302; sigma[51] = 0.001295844179; sigma[52] = 0.000916095852; sigma[53] = 0.000879206608; sigma[54] = 0.001286042521; sigma[55] = 0.000899909476; sigma[56] = 0.000859806886; sigma[57] = 0.001317222194; sigma[58] = 0.00092225473; sigma[59] = 0.000887081235;
                        votes[2] = 0.385316184352 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 3; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 60; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }