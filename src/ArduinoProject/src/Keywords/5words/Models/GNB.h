#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 1557.9635; theta[1] = 1758.566500000001; theta[2] = 1727.378; theta[3] = 1662.34725; theta[4] = 1541.065166666667; theta[5] = 1492.829666666667; theta[6] = 1449.554333333334; theta[7] = 1371.903666666666; theta[8] = 1242.692583333333; theta[9] = 1040.868583333334; theta[10] = 902.599166666667; theta[11] = 745.467166666667; theta[12] = 648.5085; theta[13] = 548.756; theta[14] = 467.642; theta[15] = 392.813166666667; theta[16] = 332.3325; theta[17] = 296.880583333333; theta[18] = 264.840583333333; theta[19] = 260.01025; theta[20] = 236.86175; theta[21] = 229.230416666666; theta[22] = 227.521083333333; theta[23] = 216.81925; theta[24] = 216.22325; theta[25] = 205.320166666667; theta[26] = 206.086916666667; theta[27] = 205.085083333333; theta[28] = 211.830916666667; theta[29] = 207.625416666667; theta[30] = 203.15625; theta[31] = 211.313416666667;
                        sigma[0] = 423920.13032001397; sigma[1] = 463752.49458001397; sigma[2] = 405796.59683993063; sigma[3] = 405617.2885055349; sigma[4] = 596880.6576889029; sigma[5] = 553466.4733038198; sigma[6] = 607712.393828486; sigma[7] = 717334.9153154864; sigma[8] = 630122.94739809; sigma[9] = 534727.3358060905; sigma[10] = 563557.4478032362; sigma[11] = 490209.726850903; sigma[12] = 457305.4094050142; sigma[13] = 345017.6608929307; sigma[14] = 257737.59932159728; sigma[15] = 194582.42357223626; sigma[16] = 141062.17736268073; sigma[17] = 95617.77772442377; sigma[18] = 80302.51018109046; sigma[19] = 70921.50161136822; sigma[20] = 62556.86908336822; sigma[21] = 59141.76736625712; sigma[22] = 64674.23009692377; sigma[23] = 65537.98303753488; sigma[24] = 70819.12193920155; sigma[25] = 72350.8729505696; sigma[26] = 70750.7504252571; sigma[27] = 64378.21883225711; sigma[28] = 60161.24620059042; sigma[29] = 56114.387067090465; sigma[30] = 52683.817950701574; sigma[31] = 47040.715156423765;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 1552.775416666667; theta[1] = 1713.321166666667; theta[2] = 1730.523916666666; theta[3] = 1643.51425; theta[4] = 1380.409166666667; theta[5] = 1113.30175; theta[6] = 908.441083333334; theta[7] = 798.804666666666; theta[8] = 772.82225; theta[9] = 788.102583333333; theta[10] = 981.567166666666; theta[11] = 1064.248416666667; theta[12] = 1181.899833333333; theta[13] = 1274.09575; theta[14] = 1302.098666666667; theta[15] = 1269.895666666667; theta[16] = 1282.560916666666; theta[17] = 1181.11; theta[18] = 1079.042333333333; theta[19] = 975.359916666667; theta[20] = 856.208833333333; theta[21] = 719.079583333334; theta[22] = 607.905833333333; theta[23] = 539.445583333333; theta[24] = 455.372333333333; theta[25] = 414.987083333333; theta[26] = 383.301416666667; theta[27] = 364.470666666667; theta[28] = 330.761083333334; theta[29] = 330.09675; theta[30] = 323.510166666667; theta[31] = 320.726916666667;
                        sigma[0] = 495645.08568042394; sigma[1] = 458167.3087275699; sigma[2] = 825219.856597757; sigma[3] = 1062190.7711017015; sigma[4] = 854114.987529903; sigma[5] = 756490.7889267016; sigma[6] = 522188.9088985903; sigma[7] = 496011.51590548625; sigma[8] = 497241.0689947017; sigma[9] = 500761.8006830904; sigma[10] = 910612.0877992363; sigma[11] = 1143219.4845255911; sigma[12] = 1304263.4256322363; sigma[13] = 1403288.6353383677; sigma[14] = 1269286.4037188205; sigma[15] = 1235646.6204651536; sigma[16] = 1293968.4558789234; sigma[17] = 1097305.5457455982; sigma[18] = 1043660.0748868192; sigma[19] = 886088.4486914239; sigma[20] = 763629.0414009036; sigma[21] = 589089.8889429234; sigma[22] = 425711.4574915695; sigma[23] = 340097.7850935904; sigma[24] = 259686.50150681956; sigma[25] = 265462.80587625713; sigma[26] = 305808.2124960904; sigma[27] = 255716.35752681963; sigma[28] = 173010.08528025702; sigma[29] = 157840.48279753482; sigma[30] = 156079.8897422363; sigma[31] = 141052.82511359052;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 2315.309833333333; theta[1] = 2394.981333333334; theta[2] = 2171.208249999999; theta[3] = 2031.480083333333; theta[4] = 1832.74025; theta[5] = 1617.25075; theta[6] = 1351.14575; theta[7] = 1155.505583333333; theta[8] = 989.295333333334; theta[9] = 775.639916666667; theta[10] = 631.784833333333; theta[11] = 568.2205; theta[12] = 515.802416666666; theta[13] = 471.175416666667; theta[14] = 420.66775; theta[15] = 404.318416666667; theta[16] = 388.452666666667; theta[17] = 363.218666666667; theta[18] = 322.87525; theta[19] = 297.770166666667; theta[20] = 315.813; theta[21] = 271.147833333333; theta[22] = 239.798916666667; theta[23] = 231.536666666667; theta[24] = 204.484916666667; theta[25] = 205.686; theta[26] = 203.092083333333; theta[27] = 195.26; theta[28] = 194.805833333333; theta[29] = 194.278666666667; theta[30] = 192.0925; theta[31] = 190.181666666667;
                        sigma[0] = 1218994.680958903; sigma[1] = 1301791.773625486; sigma[2] = 1404621.0272517013; sigma[3] = 1586322.584206424; sigma[4] = 1528478.8525730348; sigma[5] = 1158109.769047535; sigma[6] = 916099.5292350351; sigma[7] = 885763.3106952577; sigma[8] = 735877.2614321529; sigma[9] = 606519.2705697574; sigma[10] = 414112.66602223617; sigma[11] = 380565.39341034734; sigma[12] = 394174.27339725697; sigma[13] = 440830.4730804239; sigma[14] = 374727.50462803507; sigma[15] = 406856.81428725726; sigma[16] = 393225.65165515285; sigma[17] = 335713.47128715273; sigma[18] = 250760.16984220155; sigma[19] = 250861.02668556964; sigma[20] = 273218.7685232641; sigma[21] = 195382.2640859029; sigma[22] = 116796.49213025707; sigma[23] = 103880.15039781951; sigma[24] = 51434.1817322571; sigma[25] = 49988.001246264066; sigma[26] = 46422.657575423786; sigma[27] = 41848.81672893072; sigma[28] = 39655.91597823626; sigma[29] = 42005.2430438196; sigma[30] = 41611.87840434739; sigma[31] = 44776.904114486264;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 2101.366749999999; theta[1] = 2414.078500000002; theta[2] = 2346.90775; theta[3] = 2195.207166666666; theta[4] = 1939.013666666666; theta[5] = 1663.889833333332; theta[6] = 1178.214666666667; theta[7] = 804.67525; theta[8] = 644.17425; theta[9] = 534.472; theta[10] = 508.483583333333; theta[11] = 469.586333333333; theta[12] = 454.489833333333; theta[13] = 399.783666666667; theta[14] = 365.40375; theta[15] = 323.443333333333; theta[16] = 337.919833333333; theta[17] = 314.1195; theta[18] = 305.216; theta[19] = 289.286; theta[20] = 311.402583333333; theta[21] = 293.788166666667; theta[22] = 300.915083333333; theta[23] = 294.85725; theta[24] = 278.285416666667; theta[25] = 282.289916666667; theta[26] = 280.844916666667; theta[27] = 278.367083333333; theta[28] = 274.794666666667; theta[29] = 279.782833333333; theta[30] = 284.18125; theta[31] = 271.87075;
                        sigma[0] = 1004739.5656842015; sigma[1] = 1410907.193658347; sigma[2] = 1910838.5742313683; sigma[3] = 2017007.9232392358; sigma[4] = 1950439.3885988195; sigma[5] = 1933742.8172922353; sigma[6] = 1372274.38413882; sigma[7] = 919993.602028868; sigma[8] = 841559.7375117015; sigma[9] = 652573.0747099302; sigma[10] = 808885.0774385903; sigma[11] = 696623.9646938199; sigma[12] = 708412.2813705695; sigma[13] = 433258.11592881964; sigma[14] = 304354.0405823684; sigma[15] = 205401.83849781955; sigma[16] = 209714.19827390296; sigma[17] = 242194.2261586807; sigma[18] = 228196.85993626405; sigma[19] = 248517.40449126417; sigma[20] = 263971.5069697569; sigma[21] = 275097.2950989028; sigma[22] = 285648.2960039239; sigma[23] = 259288.35496386813; sigma[24] = 243107.44668209043; sigma[25] = 229261.32969142366; sigma[26] = 208717.2603789237; sigma[27] = 199821.72034625718; sigma[28] = 195031.1906038195; sigma[29] = 182798.7607525696; sigma[30] = 172694.76398486822; sigma[31] = 153168.5553625348;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 1840.52525; theta[1] = 1855.285583333334; theta[2] = 1885.89175; theta[3] = 1876.975083333332; theta[4] = 1824.540083333333; theta[5] = 1600.602416666666; theta[6] = 1412.150666666667; theta[7] = 1284.915333333334; theta[8] = 1159.103833333333; theta[9] = 1047.829833333333; theta[10] = 925.560083333333; theta[11] = 781.613583333333; theta[12] = 695.252583333333; theta[13] = 636.2305; theta[14] = 612.076333333334; theta[15] = 566.612166666666; theta[16] = 540.6155; theta[17] = 497.091166666667; theta[18] = 472.5305; theta[19] = 426.40575; theta[20] = 369.92925; theta[21] = 331.856; theta[22] = 297.430583333333; theta[23] = 289.367333333333; theta[24] = 268.690166666667; theta[25] = 261.84225; theta[26] = 242.871166666667; theta[27] = 243.267583333333; theta[28] = 223.551083333333; theta[29] = 224.362333333333; theta[30] = 216.691416666667; theta[31] = 208.814833333333;
                        sigma[0] = 906952.8968605348; sigma[1] = 892942.6081402566; sigma[2] = 1048833.432263368; sigma[3] = 1410885.0115405903; sigma[4] = 1649819.7421564246; sigma[5] = 1291970.73105559; sigma[6] = 1109739.8956251526; sigma[7] = 1004782.507163819; sigma[8] = 780347.2562175696; sigma[9] = 667423.3895705696; sigma[10] = 580065.009581424; sigma[11] = 368171.7031885902; sigma[12] = 314614.1595680905; sigma[13] = 216857.20748201417; sigma[14] = 206097.0251638196; sigma[15] = 184565.3982475695; sigma[16] = 163458.62077201405; sigma[17] = 167386.29506590293; sigma[18] = 159621.57000534728; sigma[19] = 134673.2211333682; sigma[20] = 115964.92014920147; sigma[21] = 97359.45845959736; sigma[22] = 86909.0726410904; sigma[23] = 81318.97479681959; sigma[24] = 64724.68509890291; sigma[25] = 65705.07412636821; sigma[26] = 65499.15662756958; sigma[27] = 54149.30169059045; sigma[28] = 45496.810618590425; sigma[29] = 47218.85400348629; sigma[30] = 40322.405427757134; sigma[31] = 32919.24421223627;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }