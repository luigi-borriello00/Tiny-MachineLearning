#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[3] = { 0.0f };
                        float theta[42] = { 0 };
                        float sigma[42] = { 0 };
                        theta[0] = 0.059; theta[1] = -0.056625; theta[2] = 0.950625; theta[3] = 0.062; theta[4] = -0.0215; theta[5] = 0.966; theta[6] = 0.07475; theta[7] = 0.014375; theta[8] = 1.077125; theta[9] = 0.080625; theta[10] = -0.090875; theta[11] = 1.056125; theta[12] = 0.142625; theta[13] = -0.03225; theta[14] = 0.805875; theta[15] = 0.15925; theta[16] = -0.00625; theta[17] = 0.856; theta[18] = 0.120125; theta[19] = 0.07; theta[20] = 1.0075; theta[21] = 0.0705; theta[22] = 0.049375; theta[23] = 1.037; theta[24] = 0.0385; theta[25] = -0.0265; theta[26] = 0.996625; theta[27] = 0.04; theta[28] = -0.03525; theta[29] = 0.983375; theta[30] = 0.05425; theta[31] = -0.008625; theta[32] = 0.986125; theta[33] = 0.05825; theta[34] = -0.000625; theta[35] = 0.98275; theta[36] = 0.055125; theta[37] = -0.007; theta[38] = 0.9835; theta[39] = 0.05525; theta[40] = -0.007; theta[41] = 0.986125;
                        sigma[0] = 0.00161400004; sigma[1] = 0.002504859415; sigma[2] = 0.023913359415; sigma[3] = 0.00228100004; sigma[4] = 0.00378775004; sigma[5] = 0.00221900004; sigma[6] = 0.00238743754; sigma[7] = 0.009099609415; sigma[8] = 0.007037984415; sigma[9] = 0.001823359415; sigma[10] = 0.005290484415; sigma[11] = 0.010271234415; sigma[12] = 0.002104359415; sigma[13] = 0.00262993754; sigma[14] = 0.010764234415; sigma[15] = 0.00376943754; sigma[16] = 0.00803093754; sigma[17] = 0.00904400004; sigma[18] = 0.003458734415; sigma[19] = 0.01243500004; sigma[20] = 0.00682625004; sigma[21] = 0.00429475004; sigma[22] = 0.009243359415; sigma[23] = 0.00235850004; sigma[24] = 0.00203275004; sigma[25] = 0.00442775004; sigma[26] = 0.001234859415; sigma[27] = 0.00146500004; sigma[28] = 0.00365743754; sigma[29] = 0.001264859415; sigma[30] = 0.00151693754; sigma[31] = 0.003084359415; sigma[32] = 0.000713734415; sigma[33] = 0.00151943754; sigma[34] = 0.002913359415; sigma[35] = 0.00048993754; sigma[36] = 0.001424984415; sigma[37] = 0.00287350004; sigma[38] = 0.00067275004; sigma[39] = 0.00145993754; sigma[40] = 0.00300850004; sigma[41] = 0.000631234415;
                        votes[0] = 0.333333333333 - gauss(x, theta, sigma);
                        theta[0] = 0.014375; theta[1] = 0.007375; theta[2] = 0.9595; theta[3] = 0.0195; theta[4] = 0.0455; theta[5] = 0.96075; theta[6] = 0.0225; theta[7] = 0.076875; theta[8] = 1.09925; theta[9] = 0.042625; theta[10] = -0.128125; theta[11] = 1.097125; theta[12] = 0.1105; theta[13] = -0.069875; theta[14] = 0.867125; theta[15] = 0.175; theta[16] = 0.101625; theta[17] = 0.775; theta[18] = 0.172; theta[19] = 0.164; theta[20] = 0.88; theta[21] = 0.097; theta[22] = 0.141875; theta[23] = 1.0005; theta[24] = 0.0225; theta[25] = 0.071875; theta[26] = 1.038625; theta[27] = -0.011125; theta[28] = 0.03175; theta[29] = 1.012875; theta[30] = -0.012375; theta[31] = 0.028875; theta[32] = 0.994125; theta[33] = -0.008875; theta[34] = 0.02975; theta[35] = 0.979125; theta[36] = -0.002875; theta[37] = 0.029875; theta[38] = 0.976; theta[39] = -0.000625; theta[40] = 0.021375; theta[41] = 0.9845;
                        sigma[0] = 0.002429609415; sigma[1] = 0.001361859415; sigma[2] = 0.02412725004; sigma[3] = 0.00281975004; sigma[4] = 0.00448975004; sigma[5] = 0.00309693754; sigma[6] = 0.00510875004; sigma[7] = 0.016483984415; sigma[8] = 0.00710943754; sigma[9] = 0.006106859415; sigma[10] = 0.020262734415; sigma[11] = 0.010537984415; sigma[12] = 0.00347975004; sigma[13] = 0.015883734415; sigma[14] = 0.009557984415; sigma[15] = 0.00366750004; sigma[16] = 0.016678609415; sigma[17] = 0.00421000004; sigma[18] = 0.00356600004; sigma[19] = 0.01619650004; sigma[20] = 0.00798000004; sigma[21] = 0.00506100004; sigma[22] = 0.015750234415; sigma[23] = 0.00810975004; sigma[24] = 0.00426875004; sigma[25] = 0.009700234415; sigma[26] = 0.001811859415; sigma[27] = 0.003457484415; sigma[28] = 0.00475693754; sigma[29] = 0.001955484415; sigma[30] = 0.004393109415; sigma[31] = 0.004292484415; sigma[32] = 0.001361734415; sigma[33] = 0.004052484415; sigma[34] = 0.00243993754; sigma[35] = 0.000697984415; sigma[36] = 0.003565484415; sigma[37] = 0.001946234415; sigma[38] = 0.00077400004; sigma[39] = 0.003298359415; sigma[40] = 0.001919359415; sigma[41] = 0.00076975004;
                        votes[1] = 0.333333333333 - gauss(x, theta, sigma);
                        theta[0] = 0.08325; theta[1] = -0.036; theta[2] = 0.967625; theta[3] = 0.08875; theta[4] = -0.016875; theta[5] = 0.953875; theta[6] = 0.094375; theta[7] = 0.012875; theta[8] = 1.07475; theta[9] = 0.1005; theta[10] = -0.080875; theta[11] = 1.011875; theta[12] = 0.142125; theta[13] = -0.000375; theta[14] = 0.78875; theta[15] = 0.13275; theta[16] = 0.084; theta[17] = 0.94125; theta[18] = 0.097125; theta[19] = 0.083625; theta[20] = 1.097; theta[21] = 0.090375; theta[22] = -0.009125; theta[23] = 1.02525; theta[24] = 0.118875; theta[25] = 0.0055; theta[26] = 0.882375; theta[27] = 0.126875; theta[28] = 0.06075; theta[29] = 0.906; theta[30] = 0.098375; theta[31] = 0.077875; theta[32] = 0.99925; theta[33] = 0.060375; theta[34] = 0.010375; theta[35] = 1.014125; theta[36] = 0.053; theta[37] = -0.030625; theta[38] = 0.987125; theta[39] = 0.055625; theta[40] = -0.028125; theta[41] = 0.9785;
                        sigma[0] = 0.00095943754; sigma[1] = 0.00131400004; sigma[2] = 0.012198109415; sigma[3] = 0.00311093754; sigma[4] = 0.006603984415; sigma[5] = 0.001818734415; sigma[6] = 0.002377109415; sigma[7] = 0.006060484415; sigma[8] = 0.00504743754; sigma[9] = 0.00125725004; sigma[10] = 0.002967984415; sigma[11] = 0.013145234415; sigma[12] = 0.001461734415; sigma[13] = 0.002706109415; sigma[14] = 0.00386343754; sigma[15] = 0.00189493754; sigma[16] = 0.00623900004; sigma[17] = 0.00884343754; sigma[18] = 0.002040484415; sigma[19] = 0.006770609415; sigma[20] = 0.00561600004; sigma[21] = 0.001806109415; sigma[22] = 0.003865484415; sigma[23] = 0.01291743754; sigma[24] = 0.001479984415; sigma[25] = 0.00601725004; sigma[26] = 0.009338109415; sigma[27] = 0.002511484415; sigma[28] = 0.00637693754; sigma[29] = 0.00852900004; sigma[30] = 0.003313609415; sigma[31] = 0.006639234415; sigma[32] = 0.00599693754; sigma[33] = 0.003011109415; sigma[34] = 0.009371109415; sigma[35] = 0.002729234415; sigma[36] = 0.00177100004; sigma[37] = 0.004813359415; sigma[38] = 0.001130484415; sigma[39] = 0.001619609415; sigma[40] = 0.002072734415; sigma[41] = 0.00051025004;
                        votes[2] = 0.333333333333 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 3; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 42; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }