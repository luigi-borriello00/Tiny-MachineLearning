#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[42] = { 0 };
                        float sigma[42] = { 0 };
                        theta[0] = 0.0705; theta[1] = -0.04825; theta[2] = 0.955; theta[3] = 0.103375; theta[4] = -0.083375; theta[5] = 1.045375; theta[6] = 0.09425; theta[7] = -0.176125; theta[8] = 0.912625; theta[9] = 0.12025; theta[10] = 0.07525; theta[11] = 0.75425; theta[12] = 0.09875; theta[13] = 0.206; theta[14] = 1.013; theta[15] = 0.025625; theta[16] = 0.047375; theta[17] = 1.126125; theta[18] = 0.035375; theta[19] = -0.08525; theta[20] = 1.039; theta[21] = 0.0825; theta[22] = -0.032125; theta[23] = 0.846625; theta[24] = 0.0935; theta[25] = 0.026; theta[26] = 0.89175; theta[27] = 0.05225; theta[28] = 0.071125; theta[29] = 1.0275; theta[30] = 0.009375; theta[31] = -0.01975; theta[32] = 1.03375; theta[33] = 0.0135; theta[34] = -0.056375; theta[35] = 0.983375; theta[36] = 0.023125; theta[37] = -0.034375; theta[38] = 0.973875; theta[39] = 0.026125; theta[40] = -0.031875; theta[41] = 0.981125;
                        sigma[0] = 0.001584750048; sigma[1] = 0.000971937548; sigma[2] = 0.024015000048; sigma[3] = 0.002137359423; sigma[4] = 0.012032359423; sigma[5] = 0.004972359423; sigma[6] = 0.002526937548; sigma[7] = 0.006381234423; sigma[8] = 0.013239359423; sigma[9] = 0.001549937548; sigma[10] = 0.012249937548; sigma[11] = 0.005979437548; sigma[12] = 0.003493437548; sigma[13] = 0.007144000048; sigma[14] = 0.007996000048; sigma[15] = 0.002287109423; sigma[16] = 0.011654359423; sigma[17] = 0.003746234423; sigma[18] = 0.001694859423; sigma[19] = 0.002937437548; sigma[20] = 0.005651500048; sigma[21] = 0.002053750048; sigma[22] = 0.002396734423; sigma[23] = 0.007032359423; sigma[24] = 0.002902750048; sigma[25] = 0.004271500048; sigma[26] = 0.006054437548; sigma[27] = 0.004102437548; sigma[28] = 0.003624984423; sigma[29] = 0.004318750048; sigma[30] = 0.003420859423; sigma[31] = 0.004992437548; sigma[32] = 0.002218437548; sigma[33] = 0.002315250048; sigma[34] = 0.002370609423; sigma[35] = 0.000574859423; sigma[36] = 0.002121484423; sigma[37] = 0.002617109423; sigma[38] = 0.000631234423; sigma[39] = 0.002701234423; sigma[40] = 0.002045234423; sigma[41] = 0.000229984423;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.061875; theta[1] = -0.041125; theta[2] = 0.955625; theta[3] = 0.0685; theta[4] = 0.0265; theta[5] = 0.97825; theta[6] = 0.071375; theta[7] = 0.036375; theta[8] = 1.064; theta[9] = 0.075; theta[10] = -0.142125; theta[11] = 1.039125; theta[12] = 0.119875; theta[13] = -0.06175; theta[14] = 0.83575; theta[15] = 0.159875; theta[16] = 0.112375; theta[17] = 0.8625; theta[18] = 0.114875; theta[19] = 0.1575; theta[20] = 1.01375; theta[21] = 0.063; theta[22] = 0.08875; theta[23] = 1.022375; theta[24] = 0.0515; theta[25] = 0.018125; theta[26] = 0.98825; theta[27] = 0.056375; theta[28] = -0.000125; theta[29] = 0.97625; theta[30] = 0.062; theta[31] = 0.025375; theta[32] = 0.97975; theta[33] = 0.062875; theta[34] = 0.029625; theta[35] = 0.978; theta[36] = 0.06625; theta[37] = 0.02825; theta[38] = 0.9775; theta[39] = 0.069; theta[40] = 0.028375; theta[41] = 0.977375;
                        sigma[0] = 0.001080234423; sigma[1] = 0.001749984423; sigma[2] = 0.023899609423; sigma[3] = 0.001105250048; sigma[4] = 0.006050250048; sigma[5] = 0.014266937548; sigma[6] = 0.001841859423; sigma[7] = 0.009540609423; sigma[8] = 0.002861500048; sigma[9] = 0.001835000048; sigma[10] = 0.005761734423; sigma[11] = 0.008045484423; sigma[12] = 0.001271234423; sigma[13] = 0.008869437548; sigma[14] = 0.008779437548; sigma[15] = 0.001453734423; sigma[16] = 0.011035609423; sigma[17] = 0.007088750048; sigma[18] = 0.002034984423; sigma[19] = 0.006091250048; sigma[20] = 0.004083437548; sigma[21] = 0.001573500048; sigma[22] = 0.005118437548; sigma[23] = 0.001468109423; sigma[24] = 0.001255250048; sigma[25] = 0.004407734423; sigma[26] = 0.000854437548; sigma[27] = 0.001260609423; sigma[28] = 0.003401234423; sigma[29] = 0.000603437548; sigma[30] = 0.001256000048; sigma[31] = 0.003439859423; sigma[32] = 0.000434937548; sigma[33] = 0.001260484423; sigma[34] = 0.002511109423; sigma[35] = 0.000348500048; sigma[36] = 0.001428437548; sigma[37] = 0.002434437548; sigma[38] = 0.000418750048; sigma[39] = 0.001909000048; sigma[40] = 0.002491109423; sigma[41] = 0.000474359423;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.061125; theta[1] = -0.0565; theta[2] = 0.961875; theta[3] = 0.0605; theta[4] = -0.025875; theta[5] = 0.962875; theta[6] = 0.0755; theta[7] = 0.009; theta[8] = 1.081875; theta[9] = 0.081125; theta[10] = -0.094375; theta[11] = 1.0515; theta[12] = 0.142875; theta[13] = -0.03675; theta[14] = 0.798875; theta[15] = 0.1615; theta[16] = -0.008875; theta[17] = 0.86075; theta[18] = 0.120875; theta[19] = 0.07125; theta[20] = 1.013375; theta[21] = 0.069875; theta[22] = 0.051; theta[23] = 1.039; theta[24] = 0.03875; theta[25] = -0.03525; theta[26] = 0.99625; theta[27] = 0.042875; theta[28] = -0.03625; theta[29] = 0.9845; theta[30] = 0.056; theta[31] = -0.008125; theta[32] = 0.985; theta[33] = 0.061375; theta[34] = -0.00025; theta[35] = 0.981625; theta[36] = 0.05825; theta[37] = -0.008125; theta[38] = 0.98175; theta[39] = 0.059375; theta[40] = -0.008; theta[41] = 0.98225;
                        sigma[0] = 0.001602484423; sigma[1] = 0.002415250048; sigma[2] = 0.012542734423; sigma[3] = 0.001889750048; sigma[4] = 0.004229234423; sigma[5] = 0.001937984423; sigma[6] = 0.002329750048; sigma[7] = 0.008426500048; sigma[8] = 0.007317734423; sigma[9] = 0.001769984423; sigma[10] = 0.005679609423; sigma[11] = 0.010255250048; sigma[12] = 0.002072984423; sigma[13] = 0.002476937548; sigma[14] = 0.009902484423; sigma[15] = 0.003700250048; sigma[16] = 0.008217484423; sigma[17] = 0.008276937548; sigma[18] = 0.003677984423; sigma[19] = 0.013978437548; sigma[20] = 0.006622359423; sigma[21] = 0.004338734423; sigma[22] = 0.008694000048; sigma[23] = 0.002509000048; sigma[24] = 0.001778437548; sigma[25] = 0.003777437548; sigma[26] = 0.001135937548; sigma[27] = 0.001665484423; sigma[28] = 0.003828437548; sigma[29] = 0.001077250048; sigma[30] = 0.001659000048; sigma[31] = 0.003290234423; sigma[32] = 0.000702500048; sigma[33] = 0.001921859423; sigma[34] = 0.003599937548; sigma[35] = 0.000546109423; sigma[36] = 0.001689437548; sigma[37] = 0.003027734423; sigma[38] = 0.000674437548; sigma[39] = 0.001630859423; sigma[40] = 0.003093500048; sigma[41] = 0.000409937548;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.012875; theta[1] = 0.006; theta[2] = 0.97075; theta[3] = 0.0165; theta[4] = 0.04225; theta[5] = 0.963; theta[6] = 0.013875; theta[7] = 0.0665; theta[8] = 1.1065; theta[9] = 0.031; theta[10] = -0.138625; theta[11] = 1.0995; theta[12] = 0.1045; theta[13] = -0.074; theta[14] = 0.871875; theta[15] = 0.169125; theta[16] = 0.09675; theta[17] = 0.77025; theta[18] = 0.161625; theta[19] = 0.162; theta[20] = 0.881375; theta[21] = 0.090125; theta[22] = 0.151125; theta[23] = 1.00325; theta[24] = 0.01675; theta[25] = 0.084; theta[26] = 1.0395; theta[27] = -0.016125; theta[28] = 0.0355; theta[29] = 1.006; theta[30] = -0.017625; theta[31] = 0.025875; theta[32] = 0.99075; theta[33] = -0.017125; theta[34] = 0.025875; theta[35] = 0.9775; theta[36] = -0.008375; theta[37] = 0.027625; theta[38] = 0.9765; theta[39] = -0.006125; theta[40] = 0.02325; theta[41] = 0.9855;
                        sigma[0] = 0.002570484423; sigma[1] = 0.001934000048; sigma[2] = 0.012464437548; sigma[3] = 0.003180250048; sigma[4] = 0.005112437548; sigma[5] = 0.003008500048; sigma[6] = 0.005266234423; sigma[7] = 0.016465250048; sigma[8] = 0.006965250048; sigma[9] = 0.006269000048; sigma[10] = 0.020741859423; sigma[11] = 0.009779750048; sigma[12] = 0.004409750048; sigma[13] = 0.019136500048; sigma[14] = 0.011202734423; sigma[15] = 0.004045484423; sigma[16] = 0.015691937548; sigma[17] = 0.003727437548; sigma[18] = 0.003866109423; sigma[19] = 0.017093500048; sigma[20] = 0.008016859423; sigma[21] = 0.004968734423; sigma[22] = 0.012317484423; sigma[23] = 0.007961937548; sigma[24] = 0.004164437548; sigma[25] = 0.008364000048; sigma[26] = 0.001797250048; sigma[27] = 0.003536234423; sigma[28] = 0.004429750048; sigma[29] = 0.001876500048; sigma[30] = 0.004140609423; sigma[31] = 0.003931734423; sigma[32] = 0.001171937548; sigma[33] = 0.003765484423; sigma[34] = 0.002134234423; sigma[35] = 0.000736250048; sigma[36] = 0.003421109423; sigma[37] = 0.001583109423; sigma[38] = 0.000675250048; sigma[39] = 0.002898734423; sigma[40] = 0.001671937548; sigma[41] = 0.000764750048;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.088; theta[1] = -0.031875; theta[2] = 0.9675; theta[3] = 0.092125; theta[4] = -0.01625; theta[5] = 0.95725; theta[6] = 0.102375; theta[7] = 0.011; theta[8] = 1.076125; theta[9] = 0.11; theta[10] = -0.076375; theta[11] = 1.001375; theta[12] = 0.149375; theta[13] = 0.004125; theta[14] = 0.79025; theta[15] = 0.13775; theta[16] = 0.08625; theta[17] = 0.951125; theta[18] = 0.10225; theta[19] = 0.079625; theta[20] = 1.092375; theta[21] = 0.09575; theta[22] = -0.009125; theta[23] = 1.018375; theta[24] = 0.125125; theta[25] = 0.004; theta[26] = 0.884625; theta[27] = 0.134375; theta[28] = 0.064875; theta[29] = 0.905875; theta[30] = 0.10175; theta[31] = 0.078125; theta[32] = 1.00025; theta[33] = 0.064; theta[34] = 0.013; theta[35] = 1.0155; theta[36] = 0.057875; theta[37] = -0.031; theta[38] = 0.988625; theta[39] = 0.060875; theta[40] = -0.02975; theta[41] = 0.977;
                        sigma[0] = 0.001068500048; sigma[1] = 0.001685234423; sigma[2] = 0.012286250048; sigma[3] = 0.003239234423; sigma[4] = 0.006465937548; sigma[5] = 0.001947437548; sigma[6] = 0.002723109423; sigma[7] = 0.006214000048; sigma[8] = 0.006701234423; sigma[9] = 0.001477500048; sigma[10] = 0.003090609423; sigma[11] = 0.012529359423; sigma[12] = 0.001838359423; sigma[13] = 0.002709234423; sigma[14] = 0.004609937548; sigma[15] = 0.001779937548; sigma[16] = 0.005803437548; sigma[17] = 0.008447484423; sigma[18] = 0.001904937548; sigma[19] = 0.007091109423; sigma[20] = 0.005078109423; sigma[21] = 0.001711937548; sigma[22] = 0.004012984423; sigma[23] = 0.013166109423; sigma[24] = 0.001487484423; sigma[25] = 0.005981500048; sigma[26] = 0.008564859423; sigma[27] = 0.002657109423; sigma[28] = 0.006102484423; sigma[29] = 0.009471734423; sigma[30] = 0.003356937548; sigma[31] = 0.006572734423; sigma[32] = 0.005732437548; sigma[33] = 0.002464000048; sigma[34] = 0.010546000048; sigma[35] = 0.002577250048; sigma[36] = 0.001544234423; sigma[37] = 0.004996500048; sigma[38] = 0.001166859423; sigma[39] = 0.001472984423; sigma[40] = 0.002022437548; sigma[41] = 0.000376000048;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 42; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }