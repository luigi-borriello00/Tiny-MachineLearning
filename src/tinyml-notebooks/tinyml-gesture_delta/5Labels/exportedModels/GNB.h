#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[42] = { 0 };
                        float sigma[42] = { 0 };
                        theta[0] = 0.018333333333; theta[1] = 0.005833333333; theta[2] = 0.0725; theta[3] = 0.035833333333; theta[4] = 0.00125; theta[5] = 0.11; theta[6] = 0.025416666667; theta[7] = -0.1175; theta[8] = 0.065416666667; theta[9] = 0.03; theta[10] = 0.145416666667; theta[11] = -0.14125; theta[12] = 0.013333333333; theta[13] = 0.304166666667; theta[14] = 0.075833333333; theta[15] = -0.02625; theta[16] = 0.112083333333; theta[17] = 0.275416666667; theta[18] = -0.03375; theta[19] = 0.007083333333; theta[20] = 0.068333333333; theta[21] = 0.0; theta[22] = 0.093333333333; theta[23] = -0.077916666667; theta[24] = -0.020416666667; theta[25] = 0.141666666667; theta[26] = 0.06875; theta[27] = -0.05625; theta[28] = 0.105833333333; theta[29] = 0.134583333333; theta[30] = -0.076666666667; theta[31] = 0.05125; theta[32] = 0.10125; theta[33] = -0.08125; theta[34] = 0.048333333333; theta[35] = 0.09; theta[36] = -0.08125; theta[37] = 0.0675; theta[38] = 0.084583333333; theta[39] = -0.082083333333; theta[40] = 0.064583333333; theta[41] = 0.08875;
                        sigma[0] = 0.007713889096; sigma[1] = 0.005615972429; sigma[2] = 0.066693750207; sigma[3] = 0.006282639096; sigma[4] = 0.01061927104; sigma[5] = 0.068591666874; sigma[6] = 0.006599826596; sigma[7] = 0.012285416874; sigma[8] = 0.077491493262; sigma[9] = 0.004341666874; sigma[10] = 0.020399826596; sigma[11] = 0.05871927104; sigma[12] = 0.005297222429; sigma[13] = 0.022782639096; sigma[14] = 0.104190972429; sigma[15] = 0.007715104374; sigma[16] = 0.034166493262; sigma[17] = 0.104024826596; sigma[18] = 0.004998437707; sigma[19] = 0.008745659929; sigma[20] = 0.042147222429; sigma[21] = 0.00590833354; sigma[22] = 0.013005555762; sigma[23] = 0.090508159929; sigma[24] = 0.004095659929; sigma[25] = 0.010930555762; sigma[26] = 0.108602604374; sigma[27] = 0.005373437707; sigma[28] = 0.019507639096; sigma[29] = 0.071233159929; sigma[30] = 0.004347222429; sigma[31] = 0.010477604374; sigma[32] = 0.072277604374; sigma[33] = 0.005210937707; sigma[34] = 0.009722222429; sigma[35] = 0.07163333354; sigma[36] = 0.005027604374; sigma[37] = 0.008368750207; sigma[38] = 0.072749826596; sigma[39] = 0.005358159929; sigma[40] = 0.006699826596; sigma[41] = 0.071210937707;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.00625; theta[1] = -0.01; theta[2] = 0.038333333333; theta[3] = 0.002083333333; theta[4] = 0.01375; theta[5] = 0.026666666667; theta[6] = 0.022916666667; theta[7] = 0.11125; theta[8] = 0.137083333333; theta[9] = 0.015833333333; theta[10] = -0.15; theta[11] = 0.187083333333; theta[12] = 0.049583333333; theta[13] = 0.007083333333; theta[14] = -0.222083333333; theta[15] = 0.105416666667; theta[16] = 0.275; theta[17] = -0.115833333333; theta[18] = 0.016666666667; theta[19] = 0.19375; theta[20] = 0.118333333333; theta[21] = -0.030416666667; theta[22] = 0.059166666667; theta[23] = 0.08625; theta[24] = -0.034166666667; theta[25] = 0.057083333333; theta[26] = 0.060833333333; theta[27] = -0.027916666667; theta[28] = 0.088333333333; theta[29] = 0.040416666667; theta[30] = -0.02125; theta[31] = 0.099583333333; theta[32] = 0.037916666667; theta[33] = -0.015; theta[34] = 0.090416666667; theta[35] = 0.03375; theta[36] = -0.014583333333; theta[37] = 0.087083333333; theta[38] = 0.038333333333; theta[39] = -0.014166666667; theta[40] = 0.082916666667; theta[41] = 0.032083333333;
                        sigma[0] = 0.00088177104; sigma[1] = 0.000675000207; sigma[2] = 0.037438889096; sigma[3] = 0.000933159929; sigma[4] = 0.00250677104; sigma[5] = 0.039080555762; sigma[6] = 0.001770659929; sigma[7] = 0.01439427104; sigma[8] = 0.043445659929; sigma[9] = 0.002832639096; sigma[10] = 0.019975000207; sigma[11] = 0.055837326596; sigma[12] = 0.001445659929; sigma[13] = 0.030645659929; sigma[14] = 0.036874826596; sigma[15] = 0.002441493262; sigma[16] = 0.029275000207; sigma[17] = 0.058965972429; sigma[18] = 0.002730555762; sigma[19] = 0.022715104374; sigma[20] = 0.049913889096; sigma[21] = 0.001537326596; sigma[22] = 0.009549305762; sigma[23] = 0.035823437707; sigma[24] = 0.001115972429; sigma[25] = 0.005903993262; sigma[26] = 0.036240972429; sigma[27] = 0.001033159929; sigma[28] = 0.006655555762; sigma[29] = 0.036987326596; sigma[30] = 0.000977604374; sigma[31] = 0.010287326596; sigma[32] = 0.037891493262; sigma[33] = 0.001416666874; sigma[34] = 0.011928993262; sigma[35] = 0.036115104374; sigma[36] = 0.001233159929; sigma[37] = 0.011462326596; sigma[38] = 0.036955555762; sigma[39] = 0.001115972429; sigma[40] = 0.014028993262; sigma[41] = 0.037816493262;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.019166666667; theta[1] = -0.001666666667; theta[2] = 0.12125; theta[3] = 0.00875; theta[4] = 0.0025; theta[5] = 0.103333333333; theta[6] = 0.032083333333; theta[7] = 0.02375; theta[8] = 0.327083333333; theta[9] = 0.042916666667; theta[10] = 0.0225; theta[11] = 0.200416666667; theta[12] = 0.08625; theta[13] = 0.0025; theta[14] = -0.195416666667; theta[15] = 0.072916666667; theta[16] = 0.0375; theta[17] = 0.05625; theta[18] = 0.005833333333; theta[19] = -0.005416666667; theta[20] = 0.237916666667; theta[21] = -0.030416666667; theta[22] = 0.003333333333; theta[23] = 0.17; theta[24] = -0.024583333333; theta[25] = 0.000416666667; theta[26] = 0.134166666667; theta[27] = -0.014583333333; theta[28] = -0.014166666667; theta[29] = 0.119166666667; theta[30] = -0.009583333333; theta[31] = -0.009166666667; theta[32] = 0.117916666667; theta[33] = -0.015; theta[34] = -0.01625; theta[35] = 0.119166666667; theta[36] = -0.0125; theta[37] = -0.007916666667; theta[38] = 0.120833333333; theta[39] = -0.015416666667; theta[40] = -0.015416666667; theta[41] = 0.13;
                        sigma[0] = 0.003715972429; sigma[1] = 0.000988889096; sigma[2] = 0.099452604374; sigma[3] = 0.00261927104; sigma[4] = 0.003660416874; sigma[5] = 0.106822222429; sigma[6] = 0.006716493262; sigma[7] = 0.03398177104; sigma[8] = 0.133953993262; sigma[9] = 0.004545659929; sigma[10] = 0.014860416874; sigma[11] = 0.110037326596; sigma[12] = 0.002773437707; sigma[13] = 0.00815208354; sigma[14] = 0.152674826596; sigma[15] = 0.006428993262; sigma[16] = 0.037418750207; sigma[17] = 0.134440104374; sigma[18] = 0.005099305762; sigma[19] = 0.041274826596; sigma[20] = 0.091974826596; sigma[21] = 0.004995659929; sigma[22] = 0.019005555762; sigma[23] = 0.124141666874; sigma[24] = 0.004091493262; sigma[25] = 0.018603993262; sigma[26] = 0.107799305762; sigma[27] = 0.002558159929; sigma[28] = 0.027565972429; sigma[29] = 0.103990972429; sigma[30] = 0.002762326596; sigma[31] = 0.024899305762; sigma[32] = 0.099624826596; sigma[33] = 0.003016666874; sigma[34] = 0.02748177104; sigma[35] = 0.105474305762; sigma[36] = 0.00352708354; sigma[37] = 0.027933159929; sigma[38] = 0.108024305762; sigma[39] = 0.003266493262; sigma[40] = 0.024241493262; sigma[41] = 0.100575000207;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.000416666667; theta[1] = 0.000833333333; theta[2] = 0.084583333333; theta[3] = -0.000416666667; theta[4] = -0.012083333333; theta[5] = 0.085; theta[6] = -0.014166666667; theta[7] = 0.12; theta[8] = 0.202916666667; theta[9] = -0.005833333333; theta[10] = -0.022916666667; theta[11] = 0.1575; theta[12] = 0.040833333333; theta[13] = -0.039583333333; theta[14] = -0.0875; theta[15] = 0.064166666667; theta[16] = 0.058333333333; theta[17] = -0.057916666667; theta[18] = 0.01625; theta[19] = 0.1; theta[20] = 0.107083333333; theta[21] = -0.04625; theta[22] = 0.077083333333; theta[23] = 0.135; theta[24] = -0.060416666667; theta[25] = 0.052916666667; theta[26] = 0.094166666667; theta[27] = -0.055833333333; theta[28] = 0.04; theta[29] = 0.086666666667; theta[30] = -0.045416666667; theta[31] = 0.025416666667; theta[32] = 0.075416666667; theta[33] = -0.03; theta[34] = 0.005833333333; theta[35] = 0.0775; theta[36] = -0.014583333333; theta[37] = -0.015833333333; theta[38] = -0.0175; theta[39] = -0.0275; theta[40] = -0.007083333333; theta[41] = 0.084166666667;
                        sigma[0] = 0.000170659929; sigma[1] = 0.001282639096; sigma[2] = 0.074033159929; sigma[3] = 0.000103993262; sigma[4] = 0.002449826596; sigma[5] = 0.07313333354; sigma[6] = 0.004365972429; sigma[7] = 0.02828333354; sigma[8] = 0.090753993262; sigma[9] = 0.008057639096; sigma[10] = 0.045028993262; sigma[11] = 0.15730208354; sigma[12] = 0.015382639096; sigma[13] = 0.029078993262; sigma[14] = 0.107185416874; sigma[15] = 0.010957639096; sigma[16] = 0.050272222429; sigma[17] = 0.083558159929; sigma[18] = 0.005898437707; sigma[19] = 0.02433333354; sigma[20] = 0.075695659929; sigma[21] = 0.005298437707; sigma[22] = 0.018362326596; sigma[23] = 0.077200000207; sigma[24] = 0.004212326596; sigma[25] = 0.016803993262; sigma[26] = 0.075890972429; sigma[27] = 0.003399305762; sigma[28] = 0.01193333354; sigma[29] = 0.074938889096; sigma[30] = 0.003358159929; sigma[31] = 0.003816493262; sigma[32] = 0.066641493262; sigma[33] = 0.00438333354; sigma[34] = 0.006424305762; sigma[35] = 0.066068750207; sigma[36] = 0.010049826596; sigma[37] = 0.032015972429; sigma[38] = 0.144743750207; sigma[39] = 0.002985416874; sigma[40] = 0.018170659929; sigma[41] = 0.067115972429;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.00625; theta[1] = -0.00375; theta[2] = -0.005; theta[3] = -0.00625; theta[4] = -0.0075; theta[5] = -0.005416666667; theta[6] = -0.007916666667; theta[7] = 0.032916666667; theta[8] = 0.115416666667; theta[9] = -0.034166666667; theta[10] = -0.009166666667; theta[11] = 0.005; theta[12] = 0.02; theta[13] = 0.088333333333; theta[14] = -0.25125; theta[15] = 0.005416666667; theta[16] = 0.057083333333; theta[17] = 0.130416666667; theta[18] = 0.00125; theta[19] = 0.020833333333; theta[20] = 0.193333333333; theta[21] = -0.00125; theta[22] = 0.040416666667; theta[23] = -0.171666666667; theta[24] = 0.022916666667; theta[25] = 0.055416666667; theta[26] = -0.075833333333; theta[27] = -0.015416666667; theta[28] = 0.017916666667; theta[29] = 0.070416666667; theta[30] = -0.050416666667; theta[31] = 0.015; theta[32] = 0.021666666667; theta[33] = -0.048333333333; theta[34] = 0.009583333333; theta[35] = 0.012083333333; theta[36] = -0.045833333333; theta[37] = -0.015416666667; theta[38] = 0.02875; theta[39] = -0.036666666667; theta[40] = -0.010416666667; theta[41] = -0.00375;
                        sigma[0] = 0.000240104374; sigma[1] = 0.00053177104; sigma[2] = 0.00035833354; sigma[3] = 0.000473437707; sigma[4] = 0.00227708354; sigma[5] = 0.000666493262; sigma[6] = 0.013241493262; sigma[7] = 0.028237326596; sigma[8] = 0.023374826596; sigma[9] = 0.001965972429; sigma[10] = 0.013632639096; sigma[11] = 0.048675000207; sigma[12] = 0.00378333354; sigma[13] = 0.012455555762; sigma[14] = 0.018510937707; sigma[15] = 0.004333159929; sigma[16] = 0.033570659929; sigma[17] = 0.024037326596; sigma[18] = 0.002810937707; sigma[19] = 0.007490972429; sigma[20] = 0.018147222429; sigma[21] = 0.003210937707; sigma[22] = 0.005820659929; sigma[23] = 0.027805555762; sigma[24] = 0.004903993262; sigma[25] = 0.036516493262; sigma[26] = 0.019224305762; sigma[27] = 0.005058159929; sigma[28] = 0.048966493262; sigma[29] = 0.009595659929; sigma[30] = 0.004187326596; sigma[31] = 0.011825000207; sigma[32] = 0.003147222429; sigma[33] = 0.003905555762; sigma[34] = 0.020795659929; sigma[35] = 0.003399826596; sigma[36] = 0.003290972429; sigma[37] = 0.023416493262; sigma[38] = 0.00829427104; sigma[39] = 0.002463889096; sigma[40] = 0.025028993262; sigma[41] = 0.000773437707;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 42; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }