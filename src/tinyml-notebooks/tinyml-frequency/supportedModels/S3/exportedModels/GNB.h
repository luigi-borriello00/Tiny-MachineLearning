#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[6] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 5111.754249999998; theta[1] = 5110.09475; theta[2] = 5112.0455; theta[3] = 5111.548375; theta[4] = 5109.803124999999; theta[5] = 5110.539750000002; theta[6] = 5110.192374999999; theta[7] = 5109.825374999998; theta[8] = 5109.903374999999; theta[9] = 5108.90975; theta[10] = 5109.056125000002; theta[11] = 5108.787125000001; theta[12] = 5109.646750000001; theta[13] = 5108.31875; theta[14] = 5107.92525; theta[15] = 5109.184625; theta[16] = 5106.416874999999; theta[17] = 5107.421999999998; theta[18] = 5108.114375; theta[19] = 5108.075125000001; theta[20] = 5107.544499999997; theta[21] = 5107.496374999997; theta[22] = 5108.154500000001; theta[23] = 5109.612750000002; theta[24] = 5108.638875; theta[25] = 5110.293875; theta[26] = 5109.643125; theta[27] = 5109.932749999998; theta[28] = 5109.007; theta[29] = 5109.586499999999; theta[30] = 5111.273749999999; theta[31] = 5108.739;
                        sigma[0] = 5636.410150145662; sigma[1] = 5588.362003145657; sigma[2] = 5592.977827958151; sigma[3] = 5575.597134317532; sigma[4] = 5612.131514692536; sigma[5] = 5621.420783145659; sigma[6] = 5904.849656317537; sigma[7] = 5910.156758067533; sigma[8] = 5866.660038067535; sigma[9] = 5756.937423145661; sigma[10] = 5765.653986942531; sigma[11] = 5909.067751192532; sigma[12] = 5729.659735145665; sigma[13] = 5295.750784145656; sigma[14] = 5529.520898145662; sigma[15] = 5350.20134556754; sigma[16] = 5301.333144692531; sigma[17] = 5306.714266708154; sigma[18] = 5259.789062817533; sigma[19] = 5159.042248192531; sigma[20] = 5103.452212958162; sigma[21] = 5038.687268817531; sigma[22] = 4836.735385458164; sigma[23] = 4789.593800645655; sigma[24] = 4871.83304569253; sigma[25] = 4840.303829442529; sigma[26] = 4851.753422192526; sigma[27] = 4785.598363145655; sigma[28] = 4822.692151708159; sigma[29] = 4690.590503458148; sigma[30] = 4883.498379145657; sigma[31] = 4644.493794708157;
                        votes[0] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 3226.705749999998; theta[1] = 3227.747125; theta[2] = 3225.0245; theta[3] = 3223.728875; theta[4] = 3224.487875; theta[5] = 3223.586750000002; theta[6] = 3220.32775; theta[7] = 3218.32725; theta[8] = 3218.5545; theta[9] = 3215.197375000002; theta[10] = 3215.65875; theta[11] = 3219.48175; theta[12] = 3221.337625; theta[13] = 3223.72925; theta[14] = 3223.62775; theta[15] = 3222.090875000001; theta[16] = 3220.462375000002; theta[17] = 3215.543624999998; theta[18] = 3219.380000000001; theta[19] = 3225.781; theta[20] = 3226.448250000002; theta[21] = 3235.699625; theta[22] = 3240.191; theta[23] = 3238.843750000002; theta[24] = 3241.1605; theta[25] = 3242.016625; theta[26] = 3243.248499999999; theta[27] = 3235.15425; theta[28] = 3233.911125; theta[29] = 3219.275125; theta[30] = 3212.084625; theta[31] = 3199.516124999998;
                        sigma[0] = 82812.23940764568; sigma[1] = 80766.26000619252; sigma[2] = 80216.47656545816; sigma[3] = 81486.44611819256; sigma[4] = 79517.72699494252; sigma[5] = 78934.6404901457; sigma[6] = 79413.37447064563; sigma[7] = 82640.60344064563; sigma[8] = 82203.43076545816; sigma[9] = 84943.26799756751; sigma[10] = 82967.87410664566; sigma[11] = 82191.14011014564; sigma[12] = 81372.63067381752; sigma[13] = 82746.02568014564; sigma[14] = 85766.73915314573; sigma[15] = 87823.69813869253; sigma[16] = 88027.87749131756; sigma[17] = 90032.71938381756; sigma[18] = 91413.26141320818; sigma[19] = 99572.05423970817; sigma[20] = 103556.55491264563; sigma[21] = 112179.41142931755; sigma[22] = 116104.34745220817; sigma[23] = 116306.57798914565; sigma[24] = 123860.56111545811; sigma[25] = 132271.73626306752; sigma[26] = 129165.42503095821; sigma[27] = 122078.16087764569; sigma[28] = 106037.37496569255; sigma[29] = 89066.59910069252; sigma[30] = 95418.50302306756; sigma[31] = 113105.88086444256;
                        votes[1] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 4241.700624999998; theta[1] = 4243.338375; theta[2] = 4240.879124999998; theta[3] = 4242.275124999999; theta[4] = 4241.60675; theta[5] = 4241.268999999998; theta[6] = 4241.491749999999; theta[7] = 4241.368375000001; theta[8] = 4240.308624999997; theta[9] = 4241.062375; theta[10] = 4240.040625; theta[11] = 4240.789625; theta[12] = 4241.866124999998; theta[13] = 4242.08325; theta[14] = 4240.88975; theta[15] = 4240.73325; theta[16] = 4241.269250000001; theta[17] = 4240.59325; theta[18] = 4241.392125; theta[19] = 4241.859750000002; theta[20] = 4241.384374999998; theta[21] = 4240.176874999999; theta[22] = 4240.995375; theta[23] = 4240.15525; theta[24] = 4241.096499999998; theta[25] = 4243.203000000002; theta[26] = 4240.96275; theta[27] = 4241.257; theta[28] = 4240.12825; theta[29] = 4239.712625; theta[30] = 4239.732250000001; theta[31] = 4241.386;
                        sigma[0] = 1105.017899067538; sigma[1] = 1153.284246817534; sigma[2] = 1111.359548692533; sigma[3] = 1111.033103192533; sigma[4] = 1127.561380145661; sigma[5] = 1225.877249708158; sigma[6] = 1332.466592645656; sigma[7] = 1199.378761817529; sigma[8] = 1162.528950067535; sigma[9] = 1244.767863817535; sigma[10] = 1220.70042406753; sigma[11] = 1114.075821817532; sigma[12] = 1154.435984442534; sigma[13] = 1043.135512645661; sigma[14] = 1055.449280645661; sigma[15] = 1015.217390145659; sigma[16] = 1074.846157645659; sigma[17] = 925.960532645657; sigma[18] = 1101.73453744253; sigma[19] = 873.78057314566; sigma[20] = 1014.680962817536; sigma[21] = 1030.529927192532; sigma[22] = 1050.340398067532; sigma[23] = 895.088013145656; sigma[24] = 1082.911950958157; sigma[25] = 1004.592044208155; sigma[26] = 928.423160645659; sigma[27] = 895.081609208159; sigma[28] = 995.959322645658; sigma[29] = 897.229825067536; sigma[30] = 1000.169303145659; sigma[31] = 890.306044708156;
                        votes[2] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 3486.533; theta[1] = 3490.857875; theta[2] = 3487.672374999998; theta[3] = 3489.3745; theta[4] = 3488.930750000001; theta[5] = 3490.4045; theta[6] = 3492.948125; theta[7] = 3490.608249999999; theta[8] = 3494.21325; theta[9] = 3493.4265; theta[10] = 3496.937874999998; theta[11] = 3496.64825; theta[12] = 3499.101249999999; theta[13] = 3499.19575; theta[14] = 3502.4385; theta[15] = 3503.275124999999; theta[16] = 3506.269; theta[17] = 3507.207375; theta[18] = 3506.444625; theta[19] = 3501.725000000001; theta[20] = 3501.230125000002; theta[21] = 3499.904999999999; theta[22] = 3502.142625; theta[23] = 3505.390250000002; theta[24] = 3510.918875000002; theta[25] = 3511.105625000002; theta[26] = 3510.030999999999; theta[27] = 3504.41675; theta[28] = 3503.368125; theta[29] = 3500.840000000001; theta[30] = 3500.470500000001; theta[31] = 3498.185374999998;
                        sigma[0] = 25619.07135920815; sigma[1] = 29665.97653244253; sigma[2] = 24821.349321317528; sigma[3] = 26445.640982958164; sigma[4] = 24694.750527645658; sigma[5] = 24403.91972295815; sigma[6] = 24233.22276594252; sigma[7] = 24319.247495145657; sigma[8] = 23943.640592645654; sigma[9] = 24733.447223458144; sigma[10] = 25529.11959994252; sigma[11] = 26451.02538014565; sigma[12] = 27642.16532414567; sigma[13] = 28298.382445145657; sigma[14] = 29744.22093595815; sigma[15] = 30389.46739569253; sigma[16] = 32023.906227208165; sigma[17] = 32157.12695256753; sigma[18] = 31228.889578067527; sigma[19] = 30382.782348208148; sigma[20] = 28581.24622694253; sigma[21] = 28278.816960708165; sigma[22] = 27714.367570067527; sigma[23] = 27754.550850645654; sigma[24] = 30614.37592819253; sigma[25] = 32094.422637817534; sigma[26] = 28823.745754708165; sigma[27] = 27079.957537645663; sigma[28] = 25535.525920942546; sigma[29] = 24780.856615708162; sigma[30] = 24058.604510458164; sigma[31] = 24297.293745567535;
                        votes[3] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 4824.2805; theta[1] = 4819.39775; theta[2] = 4823.525749999999; theta[3] = 4821.789624999998; theta[4] = 4822.178000000002; theta[5] = 4821.662625000001; theta[6] = 4826.560875000001; theta[7] = 4824.9615; theta[8] = 4826.205375; theta[9] = 4830.044874999999; theta[10] = 4832.109624999999; theta[11] = 4827.836874999999; theta[12] = 4832.843250000002; theta[13] = 4828.904874999999; theta[14] = 4827.552375; theta[15] = 4825.543124999998; theta[16] = 4829.680875; theta[17] = 4824.2085; theta[18] = 4826.405374999998; theta[19] = 4830.02225; theta[20] = 4826.651625; theta[21] = 4819.037250000001; theta[22] = 4821.096625000001; theta[23] = 4818.446124999998; theta[24] = 4818.10875; theta[25] = 4823.206249999999; theta[26] = 4826.287374999999; theta[27] = 4822.517; theta[28] = 4826.242499999998; theta[29] = 4830.050125000002; theta[30] = 4832.324249999998; theta[31] = 4831.04025;
                        sigma[0] = 24457.938830458155; sigma[1] = 22183.32103564566; sigma[2] = 22507.783122645647; sigma[3] = 22435.35415431754; sigma[4] = 20772.22248920814; sigma[5] = 21017.485190067506; sigma[6] = 22377.277348692525; sigma[7] = 19800.98485345817; sigma[8] = 17904.75823806752; sigma[9] = 21076.375333192536; sigma[10] = 19461.413316817532; sigma[11] = 15907.535769692526; sigma[12] = 18851.324137645654; sigma[13] = 19088.75241319253; sigma[14] = 19642.063441317536; sigma[15] = 21154.55185719253; sigma[16] = 24469.91651119253; sigma[17] = 18799.92071095818; sigma[18] = 17953.25365306753; sigma[19] = 23085.648170645632; sigma[20] = 23803.750571817534; sigma[21] = 23321.26922814566; sigma[22] = 33484.18967556753; sigma[23] = 32315.148814442546; sigma[24] = 26859.206034145664; sigma[25] = 27878.47753914565; sigma[26] = 25700.410917567548; sigma[27] = 20532.090134208156; sigma[28] = 20249.39660445816; sigma[29] = 20954.306834442523; sigma[30] = 19619.93436764565; sigma[31] = 18041.263723145665;
                        votes[4] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 5611.706375; theta[1] = 5613.504124999998; theta[2] = 5613.331124999999; theta[3] = 5614.313875000002; theta[4] = 5614.012499999999; theta[5] = 5614.090125; theta[6] = 5614.947875000001; theta[7] = 5614.569125; theta[8] = 5615.171499999999; theta[9] = 5617.274624999999; theta[10] = 5617.372499999998; theta[11] = 5617.875999999999; theta[12] = 5619.208375; theta[13] = 5621.04375; theta[14] = 5619.758624999999; theta[15] = 5621.20625; theta[16] = 5621.100375; theta[17] = 5620.808875; theta[18] = 5622.583374999997; theta[19] = 5622.930374999999; theta[20] = 5622.613; theta[21] = 5623.718500000001; theta[22] = 5622.855; theta[23] = 5624.290000000002; theta[24] = 5624.021999999999; theta[25] = 5624.172625000001; theta[26] = 5624.160875; theta[27] = 5623.989750000002; theta[28] = 5623.202750000001; theta[29] = 5624.033374999999; theta[30] = 5624.309875000002; theta[31] = 5625.81625;
                        sigma[0] = 8119.79189881753; sigma[1] = 8085.871887442534; sigma[2] = 7879.331890692534; sigma[3] = 7971.298514442523; sigma[4] = 8099.011661958159; sigma[5] = 8073.687034442538; sigma[6] = 8147.777807442527; sigma[7] = 7969.633218692526; sigma[8] = 7647.494833458145; sigma[9] = 7762.096055567528; sigma[10] = 8137.236789458145; sigma[11] = 7511.611687208149; sigma[12] = 7777.107489317522; sigma[13] = 7816.581041645661; sigma[14] = 7472.142547567535; sigma[15] = 7422.897221645658; sigma[16] = 7914.18373681754; sigma[17] = 7495.43952319253; sigma[18] = 7742.734238067535; sigma[19] = 7835.402016817537; sigma[20] = 7602.74779670816; sigma[21] = 7713.443108458159; sigma[22] = 8031.248200708171; sigma[23] = 7544.669248208152; sigma[24] = 7695.671841708149; sigma[25] = 7601.679817567542; sigma[26] = 7798.16908619253; sigma[27] = 7537.51056564565; sigma[28] = 8018.403785645652; sigma[29] = 8201.271048067534; sigma[30] = 7706.222676942524; sigma[31] = 7649.968079145659;
                        votes[5] = 0.166666666667 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 6; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }