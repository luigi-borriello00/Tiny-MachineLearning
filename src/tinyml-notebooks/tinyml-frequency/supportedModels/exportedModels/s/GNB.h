#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[6] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = -0.452769323304; theta[1] = -0.448111749458; theta[2] = -0.449296175513; theta[3] = -0.455467536479; theta[4] = -0.453319421436; theta[5] = -0.455211592169; theta[6] = -0.453086232214; theta[7] = -0.455885551479; theta[8] = -0.455801117501; theta[9] = -0.456126755508; theta[10] = -0.455692709034; theta[11] = -0.454674370263; theta[12] = -0.455156152518; theta[13] = -0.455944064661; theta[14] = -0.457648087496; theta[15] = -0.460996083095; theta[16] = -0.458256793972; theta[17] = -0.459171953162; theta[18] = -0.460708005081; theta[19] = -0.466479969457; theta[20] = -0.464952002621; theta[21] = -0.470422386556; theta[22] = -0.46693144956; theta[23] = -0.471816579256; theta[24] = -0.472319751328; theta[25] = -0.467523322746; theta[26] = -0.469118100162; theta[27] = -0.469533715096; theta[28] = -0.545417491715; theta[29] = -0.646002625938; theta[30] = -0.685758892946; theta[31] = -0.694882043446;
                        sigma[0] = 0.000433329058; sigma[1] = 0.000398158914; sigma[2] = 0.00042905933; sigma[3] = 0.00045491778; sigma[4] = 0.000467631912; sigma[5] = 0.000412671413; sigma[6] = 0.000378849868; sigma[7] = 0.000380435335; sigma[8] = 0.00042092914; sigma[9] = 0.000474951223; sigma[10] = 0.000441206818; sigma[11] = 0.000408613973; sigma[12] = 0.000389501619; sigma[13] = 0.000401180829; sigma[14] = 0.000528128849; sigma[15] = 0.00036782974; sigma[16] = 0.000366275882; sigma[17] = 0.00035305334; sigma[18] = 0.000369643908; sigma[19] = 0.000366597285; sigma[20] = 0.000385388068; sigma[21] = 0.000392451461; sigma[22] = 0.000369042412; sigma[23] = 0.000494450706; sigma[24] = 0.000479480065; sigma[25] = 0.000417733294; sigma[26] = 0.0004770044; sigma[27] = 0.000376979259; sigma[28] = 0.000436840646; sigma[29] = 0.00041367448; sigma[30] = 0.000370088301; sigma[31] = 0.000357927608;
                        votes[0] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = -0.257203274391; theta[1] = -0.252760288034; theta[2] = -0.250927282431; theta[3] = -0.259353750101; theta[4] = -0.257029256493; theta[5] = -0.257764201027; theta[6] = -0.257992960913; theta[7] = -0.260532679874; theta[8] = -0.259525742431; theta[9] = -0.259941284709; theta[10] = -0.260071309061; theta[11] = -0.259354508421; theta[12] = -0.260699362973; theta[13] = -0.261621302902; theta[14] = -0.261893496761; theta[15] = -0.263127065128; theta[16] = -0.260604232236; theta[17] = -0.263051909747; theta[18] = -0.264039738104; theta[19] = -0.268213316399; theta[20] = -0.266001181683; theta[21] = -0.273681020864; theta[22] = -0.269856299567; theta[23] = -0.274773869802; theta[24] = -0.274491583022; theta[25] = -0.270356911436; theta[26] = -0.273699028354; theta[27] = -0.272915616467; theta[28] = -0.349315162224; theta[29] = -0.449177523667; theta[30] = -0.488367001789; theta[31] = -0.496090658416;
                        sigma[0] = 0.000456275588; sigma[1] = 0.000474620023; sigma[2] = 0.000459079542; sigma[3] = 0.000520605146; sigma[4] = 0.000524552483; sigma[5] = 0.000443790628; sigma[6] = 0.000524301764; sigma[7] = 0.000455557525; sigma[8] = 0.000488578724; sigma[9] = 0.000447664579; sigma[10] = 0.000498368262; sigma[11] = 0.000426526896; sigma[12] = 0.000429488941; sigma[13] = 0.000450463788; sigma[14] = 0.000458136597; sigma[15] = 0.000474069613; sigma[16] = 0.000501694355; sigma[17] = 0.000397806649; sigma[18] = 0.000451748089; sigma[19] = 0.000492138906; sigma[20] = 0.000422323729; sigma[21] = 0.000461246722; sigma[22] = 0.000405983729; sigma[23] = 0.000461681754; sigma[24] = 0.000433430938; sigma[25] = 0.000414399401; sigma[26] = 0.000377167531; sigma[27] = 0.000399602158; sigma[28] = 0.00037154734; sigma[29] = 0.000407325871; sigma[30] = 0.000421469935; sigma[31] = 0.0003697585;
                        votes[1] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = -0.074875082165; theta[1] = -0.071474532005; theta[2] = -0.071298202963; theta[3] = -0.078782590572; theta[4] = -0.077256236769; theta[5] = -0.07750142513; theta[6] = -0.07759588054; theta[7] = -0.079255941022; theta[8] = -0.078851878224; theta[9] = -0.079331008399; theta[10] = -0.080071286389; theta[11] = -0.078706438253; theta[12] = -0.079525922949; theta[13] = -0.079878137685; theta[14] = -0.081672405085; theta[15] = -0.083310407378; theta[16] = -0.080728952306; theta[17] = -0.082805212501; theta[18] = -0.082850014365; theta[19] = -0.088197969351; theta[20] = -0.085579717107; theta[21] = -0.09306815293; theta[22] = -0.088102371639; theta[23] = -0.094449160735; theta[24] = -0.093725373848; theta[25] = -0.090227724166; theta[26] = -0.092818226208; theta[27] = -0.091677883493; theta[28] = -0.168395054168; theta[29] = -0.267902787394; theta[30] = -0.308238179515; theta[31] = -0.314854280062;
                        sigma[0] = 0.000356295865; sigma[1] = 0.000337138397; sigma[2] = 0.000323741651; sigma[3] = 0.000346390404; sigma[4] = 0.000319846689; sigma[5] = 0.00032567635; sigma[6] = 0.000326515593; sigma[7] = 0.000332182688; sigma[8] = 0.000332643368; sigma[9] = 0.00032513882; sigma[10] = 0.000335775143; sigma[11] = 0.000329454297; sigma[12] = 0.000297135107; sigma[13] = 0.000308610599; sigma[14] = 0.000319649656; sigma[15] = 0.000330864156; sigma[16] = 0.000313592612; sigma[17] = 0.00033623634; sigma[18] = 0.000342269034; sigma[19] = 0.000353841033; sigma[20] = 0.000332722115; sigma[21] = 0.000382264694; sigma[22] = 0.000356530376; sigma[23] = 0.000383441091; sigma[24] = 0.000377357847; sigma[25] = 0.000366342866; sigma[26] = 0.000391942353; sigma[27] = 0.000363844028; sigma[28] = 0.000403986263; sigma[29] = 0.000408105383; sigma[30] = 0.000384556388; sigma[31] = 0.000479051771;
                        votes[2] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 0.745377417512; theta[1] = 0.749037432792; theta[2] = 0.750576296222; theta[3] = 0.742108035289; theta[4] = 0.743212969008; theta[5] = 0.744049797155; theta[6] = 0.743814423251; theta[7] = 0.741759993652; theta[8] = 0.742869393599; theta[9] = 0.741727604877; theta[10] = 0.741074502703; theta[11] = 0.740352233683; theta[12] = 0.741034788008; theta[13] = 0.740604831734; theta[14] = 0.739354212408; theta[15] = 0.736587297335; theta[16] = 0.740902281806; theta[17] = 0.737484695662; theta[18] = 0.737668146009; theta[19] = 0.732779667808; theta[20] = 0.736003670633; theta[21] = 0.728103191032; theta[22] = 0.731433355543; theta[23] = 0.725868645092; theta[24] = 0.727627836501; theta[25] = 0.732414680082; theta[26] = 0.729464289094; theta[27] = 0.729144072414; theta[28] = 0.652856388959; theta[29] = 0.553088084562; theta[30] = 0.512843725062; theta[31] = 0.505630898301;
                        sigma[0] = 0.000541052294; sigma[1] = 0.000531468524; sigma[2] = 0.000532647172; sigma[3] = 0.00053241935; sigma[4] = 0.000531986707; sigma[5] = 0.000542489657; sigma[6] = 0.000568832049; sigma[7] = 0.000564356578; sigma[8] = 0.00057298738; sigma[9] = 0.000564638769; sigma[10] = 0.000554222037; sigma[11] = 0.000567244072; sigma[12] = 0.000566111527; sigma[13] = 0.000517472197; sigma[14] = 0.000536195229; sigma[15] = 0.000522689678; sigma[16] = 0.000524004925; sigma[17] = 0.00051780468; sigma[18] = 0.00051593127; sigma[19] = 0.000503135412; sigma[20] = 0.000498001477; sigma[21] = 0.000498817153; sigma[22] = 0.000476150367; sigma[23] = 0.000466398359; sigma[24] = 0.000482636616; sigma[25] = 0.000475827799; sigma[26] = 0.00047441654; sigma[27] = 0.000473758592; sigma[28] = 0.000464895326; sigma[29] = 0.000452619268; sigma[30] = 0.000465824856; sigma[31] = 0.000441597224;
                        votes[3] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 0.532696625313; theta[1] = 0.536420618124; theta[2] = 0.536434190275; theta[3] = 0.528360320508; theta[4] = 0.528579778944; theta[5] = 0.529022043025; theta[6] = 0.529421478359; theta[7] = 0.528113156214; theta[8] = 0.529831052071; theta[9] = 0.52881201661; theta[10] = 0.527190735868; theta[11] = 0.526665206472; theta[12] = 0.52645068363; theta[13] = 0.525641021767; theta[14] = 0.524845425596; theta[15] = 0.522935852849; theta[16] = 0.527942743009; theta[17] = 0.525448933549; theta[18] = 0.525755447356; theta[19] = 0.521499928179; theta[20] = 0.525818799963; theta[21] = 0.518435406112; theta[22] = 0.521852974105; theta[23] = 0.516001770371; theta[24] = 0.517758227386; theta[25] = 0.522096768577; theta[26] = 0.518658773387; theta[27] = 0.519331245404; theta[28] = 0.445142248624; theta[29] = 0.347520476871; theta[30] = 0.312161602544; theta[31] = 0.307258082208;
                        sigma[0] = 0.012600718759; sigma[1] = 0.013517677185; sigma[2] = 0.014814500523; sigma[3] = 0.015156452071; sigma[4] = 0.017435349145; sigma[5] = 0.018114139811; sigma[6] = 0.017245800374; sigma[7] = 0.016096798507; sigma[8] = 0.014417837521; sigma[9] = 0.014135147715; sigma[10] = 0.014896888448; sigma[11] = 0.01552854644; sigma[12] = 0.017140993917; sigma[13] = 0.017004069403; sigma[14] = 0.016763187223; sigma[15] = 0.015477138317; sigma[16] = 0.013124541381; sigma[17] = 0.011998255364; sigma[18] = 0.010108764871; sigma[19] = 0.008805872407; sigma[20] = 0.007167829612; sigma[21] = 0.006424247317; sigma[22] = 0.005569173604; sigma[23] = 0.005309467442; sigma[24] = 0.0049882833; sigma[25] = 0.004878837361; sigma[26] = 0.004772831344; sigma[27] = 0.004128740766; sigma[28] = 0.002474272802; sigma[29] = 0.001057898282; sigma[30] = 0.001071270559; sigma[31] = 0.002686812613;
                        votes[4] = 0.166666666667 - gauss(x, theta, sigma);
                        theta[0] = 0.89647162303; theta[1] = 0.901212109086; theta[2] = 0.902552719746; theta[3] = 0.894401183746; theta[4] = 0.895555111113; theta[5] = 0.896634613204; theta[6] = 0.896838268025; theta[7] = 0.894675203954; theta[8] = 0.895617225719; theta[9] = 0.895562990475; theta[10] = 0.894974812092; theta[11] = 0.893910987426; theta[12] = 0.895275959582; theta[13] = 0.895646468592; theta[14] = 0.894199471672; theta[15] = 0.891440004044; theta[16] = 0.896671218678; theta[17] = 0.892620419934; theta[18] = 0.893411269714; theta[19] = 0.888523092392; theta[20] = 0.891929828278; theta[21] = 0.884660559399; theta[22] = 0.887050643411; theta[23] = 0.881214426412; theta[24] = 0.883491944798; theta[25] = 0.888083409284; theta[26] = 0.885194688691; theta[27] = 0.884531738768; theta[28] = 0.808327152555; theta[29] = 0.708499262258; theta[30] = 0.667965406077; theta[31] = 0.662241042148;
                        sigma[0] = 0.000739923495; sigma[1] = 0.000737549244; sigma[2] = 0.000720430936; sigma[3] = 0.000727269806; sigma[4] = 0.000738103403; sigma[5] = 0.000738377772; sigma[6] = 0.000744594061; sigma[7] = 0.000728278895; sigma[8] = 0.000699119231; sigma[9] = 0.000709185164; sigma[10] = 0.00074355096; sigma[11] = 0.000683227349; sigma[12] = 0.000709883837; sigma[13] = 0.000713761847; sigma[14] = 0.000683386379; sigma[15] = 0.000676204012; sigma[16] = 0.000724804933; sigma[17] = 0.000684164279; sigma[18] = 0.000708138392; sigma[19] = 0.000716537792; sigma[20] = 0.000696195264; sigma[21] = 0.000706480371; sigma[22] = 0.000733342861; sigma[23] = 0.000688611028; sigma[24] = 0.000705328624; sigma[25] = 0.000696956638; sigma[26] = 0.000715050684; sigma[27] = 0.000688847022; sigma[28] = 0.000733362883; sigma[29] = 0.000749739822; sigma[30] = 0.000704121789; sigma[31] = 0.000700474781;
                        votes[5] = 0.166666666667 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 6; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }