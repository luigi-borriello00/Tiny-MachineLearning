#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 0.023138952551; theta[1] = -0.064176520795; theta[2] = -0.069661099633; theta[3] = -0.053238561022; theta[4] = 0.004743985804; theta[5] = 0.099005950197; theta[6] = 0.326029801273; theta[7] = 0.470820275751; theta[8] = 0.561558511173; theta[9] = 0.522432839615; theta[10] = 0.538951449637; theta[11] = 0.484193821885; theta[12] = 0.439846016234; theta[13] = 0.320092055074; theta[14] = 0.243683134992; theta[15] = 0.190005296826; theta[16] = 0.110112116124; theta[17] = 0.104821794434; theta[18] = 0.078722533479; theta[19] = 0.089132879677; theta[20] = 0.041981904805; theta[21] = 0.098615402725; theta[22] = 0.153847300698; theta[23] = 0.121727094209; theta[24] = 0.224746135233; theta[25] = 0.177338551589; theta[26] = 0.249702282059; theta[27] = 0.253095558809; theta[28] = 0.306681281056; theta[29] = 0.267529278045; theta[30] = 0.26278314457; theta[31] = 0.258214473757;
                        sigma[0] = 0.321299835442; sigma[1] = 0.297856268978; sigma[2] = 0.208849150501; sigma[3] = 0.192463224855; sigma[4] = 0.290920314846; sigma[5] = 0.241828900552; sigma[6] = 0.342298035314; sigma[7] = 0.414020753228; sigma[8] = 0.535135496988; sigma[9] = 0.662680350334; sigma[10] = 0.936079421351; sigma[11] = 1.21217887858; sigma[12] = 1.278312248093; sigma[13] = 0.875147205683; sigma[14] = 0.708532077436; sigma[15] = 0.68811988484; sigma[16] = 0.547193151355; sigma[17] = 0.513430222449; sigma[18] = 0.536529236052; sigma[19] = 0.574935908068; sigma[20] = 0.565208326303; sigma[21] = 0.737538107114; sigma[22] = 0.86218941293; sigma[23] = 0.9621740553; sigma[24] = 1.265169101331; sigma[25] = 1.240947387137; sigma[26] = 1.486179627131; sigma[27] = 1.413180023965; sigma[28] = 1.510443658823; sigma[29] = 1.331524595281; sigma[30] = 1.193053075508; sigma[31] = 1.045812880334;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.01862226372; theta[1] = -0.100437041104; theta[2] = -0.067404214972; theta[3] = -0.066211403675; theta[4] = -0.107416586671; theta[5] = -0.151866032978; theta[6] = -0.080077989899; theta[7] = 0.035429004104; theta[8] = 0.128549179705; theta[9] = 0.241045529351; theta[10] = 0.640725812081; theta[11] = 0.985479345785; theta[12] = 1.331633270079; theta[13] = 1.475303200427; theta[14] = 1.627232495064; theta[15] = 1.83938519208; theta[16] = 1.981625987438; theta[17] = 2.153795352771; theta[18] = 2.183296391791; theta[19] = 2.12588951844; theta[20] = 1.903644087751; theta[21] = 1.828461493187; theta[22] = 1.542708399892; theta[23] = 1.357902517681; theta[24] = 1.235551986362; theta[25] = 1.04566836467; theta[26] = 1.061914255705; theta[27] = 0.999850854075; theta[28] = 0.902598438348; theta[29] = 0.864113742922; theta[30] = 0.835515212081; theta[31] = 0.77410904433;
                        sigma[0] = 0.375662000299; sigma[1] = 0.294269048186; sigma[2] = 0.424711456626; sigma[3] = 0.504003806927; sigma[4] = 0.416296618869; sigma[5] = 0.330537337738; sigma[6] = 0.294126366106; sigma[7] = 0.286280589737; sigma[8] = 0.422284806929; sigma[9] = 0.620587322562; sigma[10] = 1.512543643479; sigma[11] = 2.826925776314; sigma[12] = 3.645825914292; sigma[13] = 3.559481925784; sigma[14] = 3.489324551322; sigma[15] = 4.369731846479; sigma[16] = 5.019422602268; sigma[17] = 5.892103451991; sigma[18] = 6.973059152301; sigma[19] = 7.183210559267; sigma[20] = 6.899474208757; sigma[21] = 7.346352253133; sigma[22] = 5.675273160152; sigma[23] = 4.993032421693; sigma[24] = 4.639246246232; sigma[25] = 4.553163902262; sigma[26] = 6.423761505034; sigma[27] = 5.613284507098; sigma[28] = 4.34369315227; sigma[29] = 3.745358397839; sigma[30] = 3.534512216131; sigma[31] = 3.135897612502;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.682476419731; theta[1] = 0.445859129043; theta[2] = 0.248743292298; theta[3] = 0.201033310946; theta[4] = 0.208374378218; theta[5] = 0.181249607525; theta[6] = 0.252173741733; theta[7] = 0.306419645695; theta[8] = 0.328040099743; theta[9] = 0.227171684562; theta[10] = 0.1899245512; theta[11] = 0.205472321923; theta[12] = 0.217972156971; theta[13] = 0.196533468178; theta[14] = 0.16579869099; theta[15] = 0.211641263841; theta[16] = 0.220643087978; theta[17] = 0.258543188564; theta[18] = 0.228732334296; theta[19] = 0.196643604199; theta[20] = 0.279297233118; theta[21] = 0.24664194697; theta[22] = 0.198676135447; theta[23] = 0.178118364545; theta[24] = 0.17513199559; theta[25] = 0.178853640355; theta[26] = 0.235976320061; theta[27] = 0.20706295754; theta[28] = 0.221374587665; theta[29] = 0.202514359942; theta[30] = 0.210133720377; theta[31] = 0.158576356964;
                        sigma[0] = 0.923907025334; sigma[1] = 0.836107279047; sigma[2] = 0.722908731; sigma[3] = 0.752701529978; sigma[4] = 0.744982331299; sigma[5] = 0.506018742323; sigma[6] = 0.515999131416; sigma[7] = 0.511231761281; sigma[8] = 0.62494794891; sigma[9] = 0.751651122995; sigma[10] = 0.687848854886; sigma[11] = 0.941052995396; sigma[12] = 1.101840894853; sigma[13] = 1.11817915553; sigma[14] = 1.030142509659; sigma[15] = 1.438805518194; sigma[16] = 1.525358451683; sigma[17] = 1.802650597023; sigma[18] = 1.675416671059; sigma[19] = 2.033642994458; sigma[20] = 2.468562267659; sigma[21] = 2.436549926049; sigma[22] = 1.557045215118; sigma[23] = 1.525081825966; sigma[24] = 0.918861105439; sigma[25] = 0.857383969474; sigma[26] = 0.975147348806; sigma[27] = 0.918632290711; sigma[28] = 0.995624747621; sigma[29] = 0.996732145772; sigma[30] = 0.942323104765; sigma[31] = 0.995483652563;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.496219902102; theta[1] = 0.461163982577; theta[2] = 0.374790339474; theta[3] = 0.313814370261; theta[4] = 0.282568228758; theta[5] = 0.212078536875; theta[6] = 0.122388229592; theta[7] = 0.039888967815; theta[8] = 0.009993526106; theta[9] = -0.041304263124; theta[10] = 0.031013269323; theta[11] = 0.050369473459; theta[12] = 0.115462466805; theta[13] = 0.082831516387; theta[14] = 0.074169640748; theta[15] = 0.059553248772; theta[16] = 0.121116598471; theta[17] = 0.144768536488; theta[18] = 0.183086158877; theta[19] = 0.172487329879; theta[20] = 0.266040198185; theta[21] = 0.326593684706; theta[22] = 0.421823531381; theta[23] = 0.420737583218; theta[24] = 0.48706284716; theta[25] = 0.496106670532; theta[26] = 0.592334192686; theta[27] = 0.596437286481; theta[28] = 0.62217044553; theta[29] = 0.619023726887; theta[30] = 0.648359427049; theta[31] = 0.543747789801;
                        sigma[0] = 0.761517633255; sigma[1] = 0.906189298489; sigma[2] = 0.983440984636; sigma[3] = 0.957059404258; sigma[4] = 0.950646374986; sigma[5] = 0.844919998205; sigma[6] = 0.77294263915; sigma[7] = 0.530988294132; sigma[8] = 0.714699392041; sigma[9] = 0.808724978879; sigma[10] = 1.343573184252; sigma[11] = 1.722595064996; sigma[12] = 1.98023482237; sigma[13] = 1.098971654137; sigma[14] = 0.836682739523; sigma[15] = 0.72638158621; sigma[16] = 0.813500652238; sigma[17] = 1.300488669646; sigma[18] = 1.52466328048; sigma[19] = 2.014644065227; sigma[20] = 2.385012220064; sigma[21] = 3.430650675084; sigma[22] = 3.808053729609; sigma[23] = 3.806655664853; sigma[24] = 4.343064819369; sigma[25] = 3.932243561014; sigma[26] = 4.384283492047; sigma[27] = 4.386329349037; sigma[28] = 4.896568006915; sigma[29] = 4.337587309692; sigma[30] = 3.910764896641; sigma[31] = 3.405255494417;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.26913413384; theta[1] = 0.013336098233; theta[2] = 0.0440568684; theta[3] = 0.094604751818; theta[4] = 0.202649504029; theta[5] = 0.170244882401; theta[6] = 0.297958190659; theta[7] = 0.404734030497; theta[8] = 0.484527240655; theta[9] = 0.530182328919; theta[10] = 0.568543596518; theta[11] = 0.54103428981; theta[12] = 0.517998350373; theta[13] = 0.459408171879; theta[14] = 0.4831587572; theta[15] = 0.51683951871; theta[16] = 0.520334034162; theta[17] = 0.568758170692; theta[18] = 0.615565851799; theta[19] = 0.562897186948; theta[20] = 0.441962366803; theta[21] = 0.461025867396; theta[22] = 0.409100922232; theta[23] = 0.399702412312; theta[24] = 0.446506827844; theta[25] = 0.411423217096; theta[26] = 0.418292370858; theta[27] = 0.431988677404; theta[28] = 0.365406906343; theta[29] = 0.34905843431; theta[30] = 0.327193379017; theta[31] = 0.246433426849;
                        sigma[0] = 0.687402634025; sigma[1] = 0.57351400712; sigma[2] = 0.53979744912; sigma[3] = 0.669457346419; sigma[4] = 0.804124018461; sigma[5] = 0.564507286927; sigma[6] = 0.625068350038; sigma[7] = 0.579925499295; sigma[8] = 0.662714344589; sigma[9] = 0.827128773007; sigma[10] = 0.963498788975; sigma[11] = 0.910406174882; sigma[12] = 0.879445388623; sigma[13] = 0.550064534853; sigma[14] = 0.56656985145; sigma[15] = 0.652695748303; sigma[16] = 0.634071014436; sigma[17] = 0.898799211941; sigma[18] = 1.066487706502; sigma[19] = 1.091748903978; sigma[20] = 1.047756071133; sigma[21] = 1.214138753936; sigma[22] = 1.158608040016; sigma[23] = 1.193857434245; sigma[24] = 1.156293232449; sigma[25] = 1.126960000194; sigma[26] = 1.375865433584; sigma[27] = 1.188642871898; sigma[28] = 1.142269692451; sigma[29] = 1.120444653143; sigma[30] = 0.913122302111; sigma[31] = 0.731863211194;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }