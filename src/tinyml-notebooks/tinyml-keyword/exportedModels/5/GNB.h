#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class GaussianNB {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float votes[5] = { 0.0f };
                        float theta[32] = { 0 };
                        float sigma[32] = { 0 };
                        theta[0] = 0.058607754833; theta[1] = -0.037372698984; theta[2] = -0.035004192817; theta[3] = -0.034719793917; theta[4] = 0.024308490828; theta[5] = 0.120137665913; theta[6] = 0.294546034785; theta[7] = 0.467610270534; theta[8] = 0.503505082893; theta[9] = 0.50873411734; theta[10] = 0.525380516313; theta[11] = 0.461553487817; theta[12] = 0.379309588744; theta[13] = 0.297107510922; theta[14] = 0.22101382536; theta[15] = 0.145522459477; theta[16] = 0.07879376687; theta[17] = 0.081822638299; theta[18] = 0.078877934605; theta[19] = 0.144929435863; theta[20] = 0.10876092502; theta[21] = 0.160951669116; theta[22] = 0.200626836727; theta[23] = 0.230238075354; theta[24] = 0.312047545136; theta[25] = 0.27857694261; theta[26] = 0.344328708753; theta[27] = 0.351767179974; theta[28] = 0.410908561105; theta[29] = 0.358871125014; theta[30] = 0.267215557215; theta[31] = 0.200412360072;
                        sigma[0] = 0.351244735738; sigma[1] = 0.295290061142; sigma[2] = 0.250516892853; sigma[3] = 0.227720780567; sigma[4] = 0.328185708639; sigma[5] = 0.295626075934; sigma[6] = 0.400873860897; sigma[7] = 0.415544930442; sigma[8] = 0.460257649079; sigma[9] = 0.591878975093; sigma[10] = 0.873288446805; sigma[11] = 1.078499146036; sigma[12] = 0.980379540391; sigma[13] = 0.733332127932; sigma[14] = 0.587563497356; sigma[15] = 0.579324342671; sigma[16] = 0.453541556627; sigma[17] = 0.511941426236; sigma[18] = 0.689557336163; sigma[19] = 1.667785413877; sigma[20] = 1.917041345845; sigma[21] = 2.55298309853; sigma[22] = 2.308803178935; sigma[23] = 3.841347622959; sigma[24] = 4.770283493612; sigma[25] = 4.899151564134; sigma[26] = 5.653703114508; sigma[27] = 6.044441832811; sigma[28] = 6.44651320789; sigma[29] = 4.218390888764; sigma[30] = 1.668225619072; sigma[31] = 0.829588269871;
                        votes[0] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.076329200842; theta[1] = -0.055432036024; theta[2] = -0.027446501681; theta[3] = -0.020402304581; theta[4] = -0.047947555904; theta[5] = -0.088156916934; theta[6] = -0.06920707982; theta[7] = 0.083372806927; theta[8] = 0.155195466882; theta[9] = 0.301511445046; theta[10] = 0.695659871099; theta[11] = 1.058509165648; theta[12] = 1.273032596458; theta[13] = 1.582558330341; theta[14] = 1.771657366345; theta[15] = 1.952085202464; theta[16] = 2.104783965389; theta[17] = 2.390854572714; theta[18] = 2.280367007904; theta[19] = 2.411111032811; theta[20] = 2.148910634383; theta[21] = 2.089246937383; theta[22] = 1.774806891922; theta[23] = 1.639534984426; theta[24] = 1.51872240924; theta[25] = 1.31612087354; theta[26] = 1.161884298242; theta[27] = 1.052607240576; theta[28] = 0.914316685122; theta[29] = 0.903200283373; theta[30] = 0.887969921887; theta[31] = 0.910778080533;
                        sigma[0] = 0.572688470823; sigma[1] = 0.442146357009; sigma[2] = 0.499866189062; sigma[3] = 0.494332692812; sigma[4] = 0.492854674589; sigma[5] = 0.458723333095; sigma[6] = 0.509392134681; sigma[7] = 0.459738602529; sigma[8] = 0.524991135474; sigma[9] = 0.854853793075; sigma[10] = 1.750314411858; sigma[11] = 3.042627998632; sigma[12] = 3.105595776146; sigma[13] = 3.87078823566; sigma[14] = 4.010515305784; sigma[15] = 4.660274511502; sigma[16] = 4.695618987609; sigma[17] = 6.434824008633; sigma[18] = 6.119817996475; sigma[19] = 7.4136426718; sigma[20] = 7.925002280709; sigma[21] = 9.081142756709; sigma[22] = 7.9222617566; sigma[23] = 8.05142593826; sigma[24] = 8.319999595078; sigma[25] = 8.748727119407; sigma[26] = 7.900406191335; sigma[27] = 6.417574066194; sigma[28] = 4.141978698756; sigma[29] = 4.081591645339; sigma[30] = 3.953778186956; sigma[31] = 5.174551202053;
                        votes[1] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.699180893124; theta[1] = 0.484089941457; theta[2] = 0.301644687019; theta[3] = 0.224496426791; theta[4] = 0.247602359408; theta[5] = 0.217261335479; theta[6] = 0.223981171214; theta[7] = 0.327819069853; theta[8] = 0.326656120891; theta[9] = 0.295076838629; theta[10] = 0.231695157141; theta[11] = 0.267437470798; theta[12] = 0.229677533795; theta[13] = 0.228124286717; theta[14] = 0.170251353771; theta[15] = 0.164229469466; theta[16] = 0.186400125071; theta[17] = 0.233561082054; theta[18] = 0.192497891891; theta[19] = 0.172465187733; theta[20] = 0.257633430991; theta[21] = 0.210840545736; theta[22] = 0.184149474155; theta[23] = 0.204112576206; theta[24] = 0.163690728161; theta[25] = 0.201341459286; theta[26] = 0.252819103297; theta[27] = 0.188042044487; theta[28] = 0.209232861278; theta[29] = 0.188457726887; theta[30] = 0.185312995985; theta[31] = 0.122105719005;
                        sigma[0] = 1.092274391202; sigma[1] = 0.960998586663; sigma[2] = 0.852573192564; sigma[3] = 0.831097789918; sigma[4] = 0.853790888552; sigma[5] = 0.628890956222; sigma[6] = 0.624532031518; sigma[7] = 0.574834784496; sigma[8] = 0.621209145196; sigma[9] = 0.933793565242; sigma[10] = 0.922616094356; sigma[11] = 1.202288085589; sigma[12] = 1.116847139241; sigma[13] = 1.173255592771; sigma[14] = 0.978523068013; sigma[15] = 1.218545186923; sigma[16] = 1.349406561748; sigma[17] = 1.585985970923; sigma[18] = 1.293505743997; sigma[19] = 1.875890740923; sigma[20] = 2.305735380776; sigma[21] = 2.193871276965; sigma[22] = 1.426963919094; sigma[23] = 1.460487079172; sigma[24] = 0.735761179224; sigma[25] = 0.71912584897; sigma[26] = 0.746777004383; sigma[27] = 0.681538182022; sigma[28] = 0.697816972541; sigma[29] = 0.661615340214; sigma[30] = 0.603196339357; sigma[31] = 0.653828386426;
                        votes[2] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.515551056701; theta[1] = 0.44173972526; theta[2] = 0.359392230086; theta[3] = 0.282454490056; theta[4] = 0.255013854768; theta[5] = 0.195823412109; theta[6] = 0.053584465638; theta[7] = 0.014579394596; theta[8] = -0.029528813024; theta[9] = -0.041997469011; theta[10] = 0.021824579632; theta[11] = 0.041769308004; theta[12] = 0.089356077684; theta[13] = 0.077001109174; theta[14] = 0.06573753744; theta[15] = 0.027361086189; theta[16] = 0.101201893932; theta[17] = 0.119286539936; theta[18] = 0.151727072842; theta[19] = 0.163761416169; theta[20] = 0.257558896096; theta[21] = 0.301598194847; theta[22] = 0.400197210412; theta[23] = 0.421974259282; theta[24] = 0.455584336176; theta[25] = 0.483453191129; theta[26] = 0.553574960371; theta[27] = 0.555783566621; theta[28] = 0.565905550051; theta[29] = 0.612075189346; theta[30] = 0.629498879656; theta[31] = 0.521692592465;
                        sigma[0] = 0.790425335444; sigma[1] = 0.842919258931; sigma[2] = 0.926664838005; sigma[3] = 0.891389609378; sigma[4] = 0.897076860361; sigma[5] = 0.841273662258; sigma[6] = 0.744281745222; sigma[7] = 0.520917759262; sigma[8] = 0.613632166785; sigma[9] = 0.731836007454; sigma[10] = 1.267667264966; sigma[11] = 1.548978567377; sigma[12] = 1.54790413649; sigma[13] = 0.949706105469; sigma[14] = 0.729234116295; sigma[15] = 0.661342206668; sigma[16] = 0.768548676722; sigma[17] = 1.268906189002; sigma[18] = 1.275529570379; sigma[19] = 1.974638106833; sigma[20] = 2.300136292351; sigma[21] = 3.175267867857; sigma[22] = 3.661431305975; sigma[23] = 3.572164129191; sigma[24] = 3.95127542934; sigma[25] = 3.784594417766; sigma[26] = 3.972750020058; sigma[27] = 4.087015437616; sigma[28] = 4.239357994414; sigma[29] = 4.169581621414; sigma[30] = 3.76321589439; sigma[31] = 3.239371610678;
                        votes[3] = 0.2 - gauss(x, theta, sigma);
                        theta[0] = 0.284195272951; theta[1] = 0.009828337266; theta[2] = 0.038347652748; theta[3] = 0.070899174561; theta[4] = 0.177379513255; theta[5] = 0.154080123914; theta[6] = 0.225868591278; theta[7] = 0.375948134395; theta[8] = 0.4101741832; theta[9] = 0.501643907183; theta[10] = 0.543950129673; theta[11] = 0.507051062201; theta[12] = 0.445248125784; theta[13] = 0.427071003179; theta[14] = 0.447562954535; theta[15] = 0.46369489802; theta[16] = 0.48923272776; theta[17] = 0.538096219066; theta[18] = 0.547297680687; theta[19] = 0.550275538392; theta[20] = 0.430322418768; theta[21] = 0.43092995405; theta[22] = 0.387721936302; theta[23] = 0.401597273129; theta[24] = 0.416900831166; theta[25] = 0.400374809548; theta[26] = 0.387902651135; theta[27] = 0.39704490122; theta[28] = 0.326993803058; theta[29] = 0.347389745243; theta[30] = 0.314449709022; theta[31] = 0.231710336211;
                        sigma[0] = 0.713496882995; sigma[1] = 0.533471321411; sigma[2] = 0.508633791334; sigma[3] = 0.623521717064; sigma[4] = 0.758811130062; sigma[5] = 0.562071100306; sigma[6] = 0.601890669681; sigma[7] = 0.568926838674; sigma[8] = 0.568998440302; sigma[9] = 0.748490073459; sigma[10] = 0.90906538597; sigma[11] = 0.818648377035; sigma[12] = 0.687442288533; sigma[13] = 0.475353159928; sigma[14] = 0.493809715508; sigma[15] = 0.594254114935; sigma[16] = 0.599033864427; sigma[17] = 0.876971795276; sigma[18] = 0.892221006885; sigma[19] = 1.070069412048; sigma[20] = 1.010469358082; sigma[21] = 1.123756436312; sigma[22] = 1.113997872629; sigma[23] = 1.120315332505; sigma[24] = 1.051983618744; sigma[25] = 1.084644545646; sigma[26] = 1.246718978168; sigma[27] = 1.107532377727; sigma[28] = 0.988955969687; sigma[29] = 1.077047009215; sigma[30] = 0.878671169657; sigma[31] = 0.696211170625;
                        votes[4] = 0.2 - gauss(x, theta, sigma);
                        // return argmax of votes
                        uint8_t classIdx = 0;
                        float maxVotes = votes[0];

                        for (uint8_t i = 1; i < 5; i++) {
                            if (votes[i] > maxVotes) {
                                classIdx = i;
                                maxVotes = votes[i];
                            }
                        }

                        return classIdx;
                    }

                protected:
                    /**
                    * Compute gaussian value
                    */
                    float gauss(float *x, float *theta, float *sigma) {
                        float gauss = 0.0f;

                        for (uint16_t i = 0; i < 32; i++) {
                            gauss += log(sigma[i]);
                            gauss += abs(x[i] - theta[i]) / sigma[i];
                        }

                        return gauss;
                    }
                };
            }
        }
    }